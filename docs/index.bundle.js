(()=>{"use strict";var __webpack_modules__={232:(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__)=>{eval('\n;// ./src/assets/images/star-wars-logo.png\nconst star_wars_logo_namespaceObject = __webpack_require__.p + "assets/008e3ccd596f5948b8b6.png";\n;// ./src/modules/Header.js\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar Header = /*#__PURE__*/function () {\n  function Header() {\n    _classCallCheck(this, Header);\n  }\n  _createClass(Header, [{\n    key: "renderHeader",\n    value:\n    // DOM methods\n    function renderHeader(location) {\n      var header = document.createElement(\'header\');\n      header.innerHTML = "\\n      <h1>\\n        <img src=\\"".concat(star_wars_logo_namespaceObject, "\\" class=\\"star-wars-logo\\" alt=\\"Star Wars\\" />\\n      </h1>\\n      <h2>Tic-Tac-Toe</h2>\\n    ");\n      document.querySelector(location).appendChild(header);\n    }\n  }]);\n  return Header;\n}();\n/* harmony default export */ const modules_Header = (Header);\n;// ./src/modules/Footer.js\nfunction Footer_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\nfunction Footer_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\nfunction Footer_createClass(Constructor, protoProps, staticProps) { if (protoProps) Footer_defineProperties(Constructor.prototype, protoProps); if (staticProps) Footer_defineProperties(Constructor, staticProps); return Constructor; }\nvar Footer = /*#__PURE__*/function () {\n  function Footer() {\n    Footer_classCallCheck(this, Footer);\n  }\n  Footer_createClass(Footer, [{\n    key: "renderFooter",\n    value:\n    // DOM methods\n    function renderFooter(location) {\n      var footer = document.createElement(\'footer\');\n      footer.innerHTML = "Created by <a href=\\"https://autumnchris.github.io/portfolio\\" target=\\"_blank\\">Autumn Bullard</a> &copy; ".concat(new Date().getFullYear());\n      document.querySelector(location).appendChild(footer);\n    }\n  }]);\n  return Footer;\n}();\n/* harmony default export */ const modules_Footer = (Footer);\n;// ./src/modules/SettingsFormData.js\nfunction SettingsFormData_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\nvar SettingsFormData = function SettingsFormData(players, difficulty, playAs) {\n  SettingsFormData_classCallCheck(this, SettingsFormData);\n  this.players = players;\n  this.difficulty = difficulty;\n  this.playAs = playAs;\n};\n/* harmony default export */ const modules_SettingsFormData = (SettingsFormData);\n;// ./src/modules/GameSettings.js\nfunction GameSettings_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\nfunction GameSettings_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\nfunction GameSettings_createClass(Constructor, protoProps, staticProps) { if (protoProps) GameSettings_defineProperties(Constructor.prototype, protoProps); if (staticProps) GameSettings_defineProperties(Constructor, staticProps); return Constructor; }\n\nvar GameSettings = /*#__PURE__*/function () {\n  function GameSettings(gameInstance) {\n    GameSettings_classCallCheck(this, GameSettings);\n    this.game = gameInstance;\n  }\n  GameSettings_createClass(GameSettings, [{\n    key: "handleSubmit",\n    value: function handleSubmit(event, gameSettingsData) {\n      event.preventDefault();\n      var gameSettings = new modules_SettingsFormData(gameSettingsData.players, gameSettingsData.difficulty, gameSettingsData.playAs);\n      this.removeGameSettings(\'.game-container\');\n      this.game.startNewGame(gameSettings);\n    }\n  }, {\n    key: "toggleOnePlayerSettings",\n    value: function toggleOnePlayerSettings(players) {\n      this.removeOnePlayerSettings(\'.game-settings-form\');\n      if (players === \'1-player\') {\n        this.renderOnePlayerSettings([\'.game-settings-form\', \'.button-group\']);\n      }\n    }\n  }, {\n    key: "openGameSettings",\n    value: function openGameSettings() {\n      this.game.removeGameAndModal();\n      this.renderGameSettings(\'.game-container\');\n    }\n\n    // DOM methods\n  }, {\n    key: "renderOnePlayerSettings",\n    value: function renderOnePlayerSettings(location) {\n      var onePlayerSettings = document.createElement(\'div\');\n      onePlayerSettings.classList.add(\'one-player-settings\');\n      onePlayerSettings.innerHTML = "\\n      <div class=\\"form-group one-player-setting difficulty\\">\\n        <label for=\\"difficulty-input\\">Difficulty:</label>\\n        <div class=\\"select-wrapper\\">\\n          <select name=\\"difficulty\\" id=\\"difficulty-input\\" autocomplete=\\"off\\" required>\\n            <option value=\\"easy\\" selected>Easy</option>\\n            <option value=\\"hard\\">Hard</option>\\n          </select>\\n        </div>\\n      </div>\\n      <div class=\\"form-group one-player-setting play-as\\">\\n        <label for=\\"play-as-input\\">Play as:</label>\\n        <div class=\\"select-wrapper\\">\\n          <select name=\\"playAs\\" id=\\"play-as-input\\" autocomplete=\\"off\\" required>\\n            <option value=\\"Rebellion\\" selected>Rebel Alliance</option>\\n            <option value=\\"Empire\\">Galactic Empire</option>\\n          </select>\\n        </div>\\n      </div>\\n    ";\n      if (typeof location === \'string\') {\n        document.querySelector(location).appendChild(onePlayerSettings);\n      } else if (Array.isArray(location)) {\n        document.querySelector(location[0]).insertBefore(onePlayerSettings, document.querySelector(location[1]));\n      }\n    }\n  }, {\n    key: "removeOnePlayerSettings",\n    value: function removeOnePlayerSettings(location) {\n      var onePlayerSettings = document.querySelector("".concat(location, " .one-player-settings"));\n      onePlayerSettings ? document.querySelector(location).removeChild(onePlayerSettings) : null;\n    }\n  }, {\n    key: "renderGameSettings",\n    value: function renderGameSettings(location) {\n      var gameSettings = document.createElement(\'div\');\n      gameSettings.classList.add(\'game-settings-container\');\n      gameSettings.innerHTML = "\\n      <h3>Start a New Game</h3>\\n      <form class=\\"game-settings-form\\" novalidate>\\n        <div class=\\"form-group players\\">\\n          <label for=\\"players-input\\">Players:</label>\\n          <div class=\\"select-wrapper\\">\\n            <select name=\\"players\\" id=\\"players-input\\" autocomplete=\\"off\\" required>\\n              <option value=\\"1-player\\" selected>Organic vs. Droid (1-Player)</option>\\n              <option value=\\"2-player\\">Organic vs. Organic (2-Player)</option>\\n            </select>\\n          </div>\\n        </div>\\n        <div class=\\"button-group\\">\\n          <button type=\\"submit\\" class=\\"button start-button\\">Start</button>\\n        </div>\\n      </form>\\n    ";\n      document.querySelector(location).appendChild(gameSettings);\n      this.toggleOnePlayerSettings(\'1-player\');\n    }\n  }, {\n    key: "removeGameSettings",\n    value: function removeGameSettings(location) {\n      var gameSettings = document.querySelector("".concat(location, " .game-settings-container"));\n      gameSettings ? document.querySelector(location).removeChild(gameSettings) : null;\n    }\n  }]);\n  return GameSettings;\n}();\n/* harmony default export */ const modules_GameSettings = (GameSettings);\n;// ./src/modules/NewGameModal.js\nfunction NewGameModal_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\nfunction NewGameModal_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\nfunction NewGameModal_createClass(Constructor, protoProps, staticProps) { if (protoProps) NewGameModal_defineProperties(Constructor.prototype, protoProps); if (staticProps) NewGameModal_defineProperties(Constructor, staticProps); return Constructor; }\nvar NewGameModal = /*#__PURE__*/function () {\n  function NewGameModal() {\n    NewGameModal_classCallCheck(this, NewGameModal);\n  }\n  NewGameModal_createClass(NewGameModal, [{\n    key: "renderWinningPlayerIcon",\n    value:\n    // DOM methods\n    function renderWinningPlayerIcon(winner, location) {\n      var winningPlayerIcon = document.createElement(\'div\');\n      winningPlayerIcon.classList.add(\'winning-player-icon\');\n      if (winner === \'draw\') {\n        winningPlayerIcon.innerHTML = "\\n        <span class=\\"fa-brands fa-rebel rebellion-icon\\" aria-hidden=\\"true\\"></span>\\n        <span class=\\"fa-brands fa-empire empire-icon\\" aria-hidden=\\"true\\"></span>\\n      ";\n      } else {\n        winningPlayerIcon.innerHTML = "<span class=\\"fa-brands fa-".concat(winner === \'Rebellion\' ? \'rebel\' : \'empire\', " ").concat(winner.toLowerCase(), "-icon\\" aria-hidden=\\"true\\"></span>");\n      }\n      if (typeof location === \'string\') {\n        document.querySelector(location).appendChild(winningPlayerIcon);\n      } else if (Array.isArray(location)) {\n        document.querySelector(location[0]).insertBefore(winningPlayerIcon, document.querySelector(location[1]));\n      }\n    }\n  }, {\n    key: "renderNewGameModal",\n    value: function renderNewGameModal(endGameMessage, winner, location) {\n      var newGameModal = document.createElement(\'div\');\n      newGameModal.setAttribute(\'id\', \'modal\');\n      newGameModal.classList.add(\'modal\');\n      newGameModal.innerHTML = "\\n      <div class=\\"modal-content\\">\\n        <div class=\\"modal-body\\">\\n          <p class=\\"end-game-message\\">".concat(endGameMessage, "</p>\\n          <div class=\\"button-group\\">\\n            <button type=\\"button\\" class=\\"button restart-button\\">Play Again</button>\\n            <button type=\\"button\\" class=\\"button game-settings-button\\">Settings</button>\\n          </div>\\n        </div>\\n      </div>\\n    ");\n      document.querySelector(location).appendChild(newGameModal);\n      document.querySelector(\'body\').classList.add(\'modal-open\');\n      this.renderWinningPlayerIcon(winner, [\'#modal .modal-body\', \'.end-game-message\']);\n    }\n  }, {\n    key: "removeNewGameModal",\n    value: function removeNewGameModal(location) {\n      var newGameModal = document.querySelector("".concat(location, " #modal"));\n      newGameModal ? document.querySelector(location).removeChild(newGameModal) : null;\n      document.querySelector(\'body\').classList.remove(\'modal-open\');\n    }\n  }]);\n  return NewGameModal;\n}();\n/* harmony default export */ const modules_NewGameModal = (NewGameModal);\n;// ./src/modules/Player.js\nfunction Player_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\nvar Player = function Player(playerType, playAs) {\n  Player_classCallCheck(this, Player);\n  this.playerType = playerType;\n  this.playAs = playAs;\n};\n/* harmony default export */ const modules_Player = (Player);\n;// ./src/modules/Game.js\nfunction Game_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\nfunction Game_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\nfunction Game_createClass(Constructor, protoProps, staticProps) { if (protoProps) Game_defineProperties(Constructor.prototype, protoProps); if (staticProps) Game_defineProperties(Constructor, staticProps); return Constructor; }\n\n\nvar Game = /*#__PURE__*/function () {\n  function Game() {\n    Game_classCallCheck(this, Game);\n    this.newGameModal = new modules_NewGameModal();\n    this.winningCombinations = [[0, 1, 2], [3, 4, 5], [6, 7, 8], [0, 3, 6], [1, 4, 7], [2, 5, 8], [0, 4, 8], [2, 4, 6]];\n    this.gameSettings;\n    this.board;\n    this.playerOne;\n    this.playerTwo;\n    this.currentPlayer = null;\n    this.aiMoveDelay;\n  }\n\n  // Triggers the startNewGame() function when the Restart button is clicked\n  Game_createClass(Game, [{\n    key: "restart",\n    value: function restart() {\n      this.startNewGame(this.gameSettings);\n    }\n\n    // Remove both game and modal from DOM\n  }, {\n    key: "removeGameAndModal",\n    value: function removeGameAndModal() {\n      this.newGameModal.removeNewGameModal(\'main\');\n      this.removeGameBoard(\'.game-container\');\n    }\n\n    // Resets and renders the game board for a new game\n  }, {\n    key: "startNewGame",\n    value: function startNewGame(gameSettings) {\n      clearTimeout(this.aiMoveDelay);\n      this.gameSettings = gameSettings;\n      this.board = new Array(9).fill().map(function (square, index) {\n        return index;\n      });\n      if (gameSettings.players === \'1-player\') {\n        this.playerOne = new modules_Player(\'human\', gameSettings.playAs);\n        this.playerTwo = new modules_Player(\'ai\', gameSettings.playAs === \'Rebellion\' ? \'Empire\' : \'Rebellion\');\n      } else {\n        this.playerOne = new modules_Player(\'human\', \'Rebellion\');\n        this.playerTwo = new modules_Player(\'human\', \'Empire\');\n      }\n      this.currentPlayer = this.playerOne;\n      this.newGameModal.removeNewGameModal(\'main\');\n      this.removeGameBoard(\'.game-container\');\n      this.renderGameBoard(this.currentPlayer, \'.game-container\');\n    }\n\n    // Click handler that allows the current player to select a square if it is the user\'s turn\n  }, {\n    key: "selectSquare",\n    value: function selectSquare(event) {\n      if (this.currentPlayer.playerType === \'human\') {\n        this.playTurn(event.target.id);\n      }\n    }\n\n    // Plays the current player\'s selected square and then changes to the opposing player\'s turn if the game hasn\'t ended\n  }, {\n    key: "playTurn",\n    value: function playTurn(square) {\n      if (typeof this.board[square] === \'number\') {\n        this.board[square] = this.currentPlayer.playAs.toLowerCase();\n        this.addAttributesToSelectedSquare(square);\n        if (this.checkForWinner(this.currentPlayer)) {\n          this.highlightWinningSquares(this.currentPlayer);\n          this.endGame(this.currentPlayer.playAs);\n        } else if (this.checkForDraw()) {\n          this.endGame(\'draw\');\n        } else {\n          this.currentPlayer === this.playerOne ? this.currentPlayer = this.playerTwo : this.currentPlayer = this.playerOne;\n          this.updateCurrentTurnMessage();\n          if (this.currentPlayer.playerType === \'ai\') this.aiMoveDelay = setTimeout(this.changeToAiTurn.bind(this), 1200);\n        }\n      }\n    }\n\n    // Determines whether to play the Easy AI or the Hard AI\n  }, {\n    key: "changeToAiTurn",\n    value: function changeToAiTurn() {\n      if (this.gameSettings.difficulty === \'hard\') {\n        this.playSmartAiTurn();\n      } else {\n        this.playRandomAiTurn();\n      }\n    }\n\n    // AI picks an unplayed square at random (Easy mode)\n  }, {\n    key: "playRandomAiTurn",\n    value: function playRandomAiTurn() {\n      var availableSquares = this.checkAvailableSquares();\n      this.playTurn(availableSquares[Math.floor(Math.random() * availableSquares.length)]);\n    }\n\n    // AI picks an unplayed square using the minimax algorithm (Hard mode)\n  }, {\n    key: "playSmartAiTurn",\n    value: function playSmartAiTurn() {\n      this.playTurn(this.handleMinimax(this.board, this.playerTwo.playAs).index);\n    }\n\n    // Minimax algorithm which determines the best move the AI should play against the user during its turn\n  }, {\n    key: "handleMinimax",\n    value: function handleMinimax(board, player) {\n      var _this = this;\n      var availableSquares = this.checkAvailableSquares(board);\n      var bestTestMove = null;\n      var bestScore;\n\n      // Human player (minimizing player)\n      if (this.checkForWinner(this.playerOne)) {\n        return {\n          score: -1\n        };\n      }\n      // AI player (maximizing player)\n      else if (this.checkForWinner(this.playerTwo)) {\n        return {\n          score: 1\n        };\n      } else if (this.checkForDraw()) {\n        return {\n          score: 0\n        };\n      } else {\n        // Recursively tests potential move outcomes for the current player\n        var testMoves = availableSquares.reduce(function (acc, square) {\n          var testMove = {};\n          var result;\n          testMove.index = board[square];\n          board[square] = player.toLowerCase();\n          if (player === _this.playerTwo.playAs) {\n            result = _this.handleMinimax(board, _this.playerOne.playAs);\n            testMove.score = result.score;\n          } else {\n            result = _this.handleMinimax(board, _this.playerTwo.playAs);\n            testMove.score = result.score;\n          }\n          board[square] = testMove.index;\n          acc.push(testMove);\n          return acc;\n        }, []);\n\n        // Uses array of test scores to determine the best move for the AI to play\n        if (player === this.playerTwo.playAs) {\n          bestScore = -Infinity;\n          for (var i = 0; i < testMoves.length; i++) {\n            if (testMoves[i].score > bestScore) {\n              bestScore = testMoves[i].score;\n              bestTestMove = i;\n            }\n          }\n        } else {\n          bestScore = Infinity;\n          for (var _i = 0; _i < testMoves.length; _i++) {\n            if (testMoves[_i].score < bestScore) {\n              bestScore = testMoves[_i].score;\n              bestTestMove = _i;\n            }\n          }\n        }\n        return testMoves[bestTestMove];\n      }\n    }\n\n    // Checks the board to see if the current player has matched one of the possible winning combinations\n  }, {\n    key: "checkForWinner",\n    value: function checkForWinner(player) {\n      var _this2 = this;\n      return this.winningCombinations.find(function (combination) {\n        return combination.every(function (val) {\n          return _this2.board[val] === player.playAs.toLowerCase();\n        });\n      });\n    }\n\n    // Checks the board to see if every square has been filled without a winner\n  }, {\n    key: "checkForDraw",\n    value: function checkForDraw() {\n      return this.board.every(function (square) {\n        return typeof square !== \'number\';\n      });\n    }\n\n    // Checks to see which squares on the board haven\'t been played yet in the current game\n  }, {\n    key: "checkAvailableSquares",\n    value: function checkAvailableSquares() {\n      return this.board.filter(function (square) {\n        return typeof square === \'number\';\n      });\n    }\n\n    // Ends the current game if a player has won or if there is a draw\n  }, {\n    key: "endGame",\n    value: function endGame(winner) {\n      var endGameMessage;\n      winner === \'draw\' ? endGameMessage = \'It\\\'s a draw!\' : endGameMessage = "The ".concat(winner, " won!");\n      this.newGameModal.renderNewGameModal(endGameMessage, winner, \'main\');\n      document.querySelectorAll(\'.square\').forEach(function (square) {\n        square.classList.add(\'game-ended\');\n      });\n    }\n\n    // DOM methods\n  }, {\n    key: "updateCurrentTurnMessage",\n    value: function updateCurrentTurnMessage() {\n      var currentTurnMessage = document.querySelector(\'.current-turn-message\');\n      currentTurnMessage.innerHTML = "It\'s the ".concat(this.currentPlayer.playAs, "\'s turn.");\n      ;\n    }\n  }, {\n    key: "addAttributesToSelectedSquare",\n    value: function addAttributesToSelectedSquare(square) {\n      document.getElementById(square).classList.add("fa-".concat(this.currentPlayer.playAs === \'Rebellion\' ? \'rebel\' : \'empire\'), "".concat(this.currentPlayer.playAs.toLowerCase(), "-icon"), \'selected\');\n      document.getElementById(square).setAttribute(\'aria-label\', this.currentPlayer.playAs === \'Rebellion\' ? \'rebel\' : \'empire\');\n    }\n  }, {\n    key: "highlightWinningSquares",\n    value: function highlightWinningSquares(player) {\n      var winningSquares = this.checkForWinner(player);\n      return winningSquares.map(function (square) {\n        document.getElementById(square).classList.add(\'winning-square\');\n      });\n    }\n  }, {\n    key: "renderGameBoard",\n    value: function renderGameBoard(firstPlayer, location) {\n      var gameBoard = document.createElement(\'div\');\n      gameBoard.classList.add(\'board-container\');\n      gameBoard.innerHTML = "\\n      <p class=\\"current-turn-message\\">The ".concat(firstPlayer.playAs, " goes first!</p>\\n      <div class=\\"game-board\\">").concat(this.board.map(function (square, index) {\n        return "<div class=\\"square-container\\">\\n          <button class=\\"square fa-brands\\" id=\\"".concat(index, "\\"></button>\\n        </div>");\n      }).join(\'\'), "</div>\\n      <button type=\\"button\\" class=\\"button restart-button\\">Restart</button>\\n    ");\n      document.querySelector(location).appendChild(gameBoard);\n    }\n  }, {\n    key: "removeGameBoard",\n    value: function removeGameBoard(location) {\n      var gameBoard = document.querySelector("".concat(location, " .board-container"));\n      gameBoard ? document.querySelector(location).removeChild(gameBoard) : null;\n    }\n  }]);\n  return Game;\n}();\n/* harmony default export */ const modules_Game = (Game);\n;// ./src/App.js\nfunction App_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\nfunction App_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\nfunction App_createClass(Constructor, protoProps, staticProps) { if (protoProps) App_defineProperties(Constructor.prototype, protoProps); if (staticProps) App_defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\nvar App = /*#__PURE__*/function () {\n  function App() {\n    App_classCallCheck(this, App);\n    this.header = new modules_Header();\n    this.footer = new modules_Footer();\n    this.game = new modules_Game();\n    this.gameSettings = new modules_GameSettings(this.game);\n    this.renderApp();\n  }\n\n  // Event listeners\n  App_createClass(App, [{\n    key: "events",\n    value: function events() {\n      var _this = this;\n      document.addEventListener(\'click\', function (event) {\n        var element = event.target;\n        element.matches(\'#modal .game-settings-button\') ? _this.gameSettings.openGameSettings() : null;\n        element.matches(\'.game-board .square-container .square\') ? _this.game.selectSquare(event) : null;\n        element.matches(\'#modal .restart-button\') ? _this.game.restart() : null;\n      });\n      document.addEventListener(\'change\', function (event) {\n        var element = event.target;\n        element.matches(\'.game-settings-form #players-input\') ? _this.gameSettings.toggleOnePlayerSettings(element.value) : null;\n      });\n      document.addEventListener(\'submit\', function (event) {\n        var element = event.target;\n        if (element.matches(\'.game-settings-form\')) {\n          element.difficulty && element.playAs ? _this.gameSettings.handleSubmit(event, {\n            players: document.getElementById(\'players-input\').value,\n            difficulty: document.getElementById(\'difficulty-input\').value,\n            playAs: document.getElementById(\'play-as-input\').value\n          }) : _this.gameSettings.handleSubmit(event, {\n            players: document.getElementById(\'players-input\').value,\n            difficulty: null,\n            playAs: null\n          });\n        }\n      });\n    }\n\n    // DOM methods\n  }, {\n    key: "renderApp",\n    value: function renderApp() {\n      this.header.renderHeader(\'#app\');\n      this.renderMain(\'#app\');\n      this.footer.renderFooter(\'#app\');\n      this.gameSettings.openGameSettings();\n      this.events();\n    }\n  }, {\n    key: "renderMain",\n    value: function renderMain(location) {\n      var main = document.createElement(\'main\');\n      main.innerHTML = "<div class=\\"game-container\\"></div>";\n      document.querySelector(location).appendChild(main);\n    }\n  }]);\n  return App;\n}();\n/* harmony default export */ const src_App = (App);\n;// ./node_modules/file-loader/dist/cjs.js?name=[name].[ext]!./src/index.html\n/* harmony default export */ const cjsname_name_ext_src = (__webpack_require__.p + "index.html");\n;// ./node_modules/file-loader/dist/cjs.js?name=[name].[ext]!./src/favicon.ico\n/* harmony default export */ const favicon = (__webpack_require__.p + "favicon.ico");\n;// ./src/index.js\n\n\n\n\n\n\nnew src_App();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjMyLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ05BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcEVBOztBQ0FBOztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGljLXRhYy10b2UtZ2FtZS8uL3NyYy9tb2R1bGVzL0hlYWRlci5qcz9lODVjIiwid2VicGFjazovL3RpYy10YWMtdG9lLWdhbWUvLi9zcmMvbW9kdWxlcy9Gb290ZXIuanM/NDEzZiIsIndlYnBhY2s6Ly90aWMtdGFjLXRvZS1nYW1lLy4vc3JjL21vZHVsZXMvU2V0dGluZ3NGb3JtRGF0YS5qcz9kMDBhIiwid2VicGFjazovL3RpYy10YWMtdG9lLWdhbWUvLi9zcmMvbW9kdWxlcy9HYW1lU2V0dGluZ3MuanM/YWVmOCIsIndlYnBhY2s6Ly90aWMtdGFjLXRvZS1nYW1lLy4vc3JjL21vZHVsZXMvTmV3R2FtZU1vZGFsLmpzP2M0ZTgiLCJ3ZWJwYWNrOi8vdGljLXRhYy10b2UtZ2FtZS8uL3NyYy9tb2R1bGVzL1BsYXllci5qcz83MmNmIiwid2VicGFjazovL3RpYy10YWMtdG9lLWdhbWUvLi9zcmMvbW9kdWxlcy9HYW1lLmpzPzg5NGMiLCJ3ZWJwYWNrOi8vdGljLXRhYy10b2UtZ2FtZS8uL3NyYy9BcHAuanM/MzMyNyIsIndlYnBhY2s6Ly90aWMtdGFjLXRvZS1nYW1lLy4vc3JjL2luZGV4Lmh0bWw/NzNjZiIsIndlYnBhY2s6Ly90aWMtdGFjLXRvZS1nYW1lLy4vc3JjL2Zhdmljb24uaWNvP2FlNzAiLCJ3ZWJwYWNrOi8vdGljLXRhYy10b2UtZ2FtZS8uL3NyYy9pbmRleC5qcz9kOWJlIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9XG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuaW1wb3J0IHN0YXJXYXJzTG9nbyBmcm9tICcuLi9hc3NldHMvaW1hZ2VzL3N0YXItd2Fycy1sb2dvLnBuZyc7XG52YXIgSGVhZGVyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gSGVhZGVyKCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBIZWFkZXIpO1xuICB9XG4gIF9jcmVhdGVDbGFzcyhIZWFkZXIsIFt7XG4gICAga2V5OiBcInJlbmRlckhlYWRlclwiLFxuICAgIHZhbHVlOlxuICAgIC8vIERPTSBtZXRob2RzXG4gICAgZnVuY3Rpb24gcmVuZGVySGVhZGVyKGxvY2F0aW9uKSB7XG4gICAgICB2YXIgaGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaGVhZGVyJyk7XG4gICAgICBoZWFkZXIuaW5uZXJIVE1MID0gXCJcXG4gICAgICA8aDE+XFxuICAgICAgICA8aW1nIHNyYz1cXFwiXCIuY29uY2F0KHN0YXJXYXJzTG9nbywgXCJcXFwiIGNsYXNzPVxcXCJzdGFyLXdhcnMtbG9nb1xcXCIgYWx0PVxcXCJTdGFyIFdhcnNcXFwiIC8+XFxuICAgICAgPC9oMT5cXG4gICAgICA8aDI+VGljLVRhYy1Ub2U8L2gyPlxcbiAgICBcIik7XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGxvY2F0aW9uKS5hcHBlbmRDaGlsZChoZWFkZXIpO1xuICAgIH1cbiAgfV0pO1xuICByZXR1cm4gSGVhZGVyO1xufSgpO1xuZXhwb3J0IGRlZmF1bHQgSGVhZGVyOyIsImZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9XG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxudmFyIEZvb3RlciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIEZvb3RlcigpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRm9vdGVyKTtcbiAgfVxuICBfY3JlYXRlQ2xhc3MoRm9vdGVyLCBbe1xuICAgIGtleTogXCJyZW5kZXJGb290ZXJcIixcbiAgICB2YWx1ZTpcbiAgICAvLyBET00gbWV0aG9kc1xuICAgIGZ1bmN0aW9uIHJlbmRlckZvb3Rlcihsb2NhdGlvbikge1xuICAgICAgdmFyIGZvb3RlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Zvb3RlcicpO1xuICAgICAgZm9vdGVyLmlubmVySFRNTCA9IFwiQ3JlYXRlZCBieSA8YSBocmVmPVxcXCJodHRwczovL2F1dHVtbmNocmlzLmdpdGh1Yi5pby9wb3J0Zm9saW9cXFwiIHRhcmdldD1cXFwiX2JsYW5rXFxcIj5BdXR1bW4gQnVsbGFyZDwvYT4gJmNvcHk7IFwiLmNvbmNhdChuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCkpO1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihsb2NhdGlvbikuYXBwZW5kQ2hpbGQoZm9vdGVyKTtcbiAgICB9XG4gIH1dKTtcbiAgcmV0dXJuIEZvb3Rlcjtcbn0oKTtcbmV4cG9ydCBkZWZhdWx0IEZvb3RlcjsiLCJmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxudmFyIFNldHRpbmdzRm9ybURhdGEgPSBmdW5jdGlvbiBTZXR0aW5nc0Zvcm1EYXRhKHBsYXllcnMsIGRpZmZpY3VsdHksIHBsYXlBcykge1xuICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU2V0dGluZ3NGb3JtRGF0YSk7XG4gIHRoaXMucGxheWVycyA9IHBsYXllcnM7XG4gIHRoaXMuZGlmZmljdWx0eSA9IGRpZmZpY3VsdHk7XG4gIHRoaXMucGxheUFzID0gcGxheUFzO1xufTtcbmV4cG9ydCBkZWZhdWx0IFNldHRpbmdzRm9ybURhdGE7IiwiZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH1cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5pbXBvcnQgU2V0dGluZ3NGb3JtRGF0YSBmcm9tICcuL1NldHRpbmdzRm9ybURhdGEnO1xudmFyIEdhbWVTZXR0aW5ncyA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIEdhbWVTZXR0aW5ncyhnYW1lSW5zdGFuY2UpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgR2FtZVNldHRpbmdzKTtcbiAgICB0aGlzLmdhbWUgPSBnYW1lSW5zdGFuY2U7XG4gIH1cbiAgX2NyZWF0ZUNsYXNzKEdhbWVTZXR0aW5ncywgW3tcbiAgICBrZXk6IFwiaGFuZGxlU3VibWl0XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZVN1Ym1pdChldmVudCwgZ2FtZVNldHRpbmdzRGF0YSkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHZhciBnYW1lU2V0dGluZ3MgPSBuZXcgU2V0dGluZ3NGb3JtRGF0YShnYW1lU2V0dGluZ3NEYXRhLnBsYXllcnMsIGdhbWVTZXR0aW5nc0RhdGEuZGlmZmljdWx0eSwgZ2FtZVNldHRpbmdzRGF0YS5wbGF5QXMpO1xuICAgICAgdGhpcy5yZW1vdmVHYW1lU2V0dGluZ3MoJy5nYW1lLWNvbnRhaW5lcicpO1xuICAgICAgdGhpcy5nYW1lLnN0YXJ0TmV3R2FtZShnYW1lU2V0dGluZ3MpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJ0b2dnbGVPbmVQbGF5ZXJTZXR0aW5nc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB0b2dnbGVPbmVQbGF5ZXJTZXR0aW5ncyhwbGF5ZXJzKSB7XG4gICAgICB0aGlzLnJlbW92ZU9uZVBsYXllclNldHRpbmdzKCcuZ2FtZS1zZXR0aW5ncy1mb3JtJyk7XG4gICAgICBpZiAocGxheWVycyA9PT0gJzEtcGxheWVyJykge1xuICAgICAgICB0aGlzLnJlbmRlck9uZVBsYXllclNldHRpbmdzKFsnLmdhbWUtc2V0dGluZ3MtZm9ybScsICcuYnV0dG9uLWdyb3VwJ10pO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJvcGVuR2FtZVNldHRpbmdzXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9wZW5HYW1lU2V0dGluZ3MoKSB7XG4gICAgICB0aGlzLmdhbWUucmVtb3ZlR2FtZUFuZE1vZGFsKCk7XG4gICAgICB0aGlzLnJlbmRlckdhbWVTZXR0aW5ncygnLmdhbWUtY29udGFpbmVyJyk7XG4gICAgfVxuXG4gICAgLy8gRE9NIG1ldGhvZHNcbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJPbmVQbGF5ZXJTZXR0aW5nc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJPbmVQbGF5ZXJTZXR0aW5ncyhsb2NhdGlvbikge1xuICAgICAgdmFyIG9uZVBsYXllclNldHRpbmdzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICBvbmVQbGF5ZXJTZXR0aW5ncy5jbGFzc0xpc3QuYWRkKCdvbmUtcGxheWVyLXNldHRpbmdzJyk7XG4gICAgICBvbmVQbGF5ZXJTZXR0aW5ncy5pbm5lckhUTUwgPSBcIlxcbiAgICAgIDxkaXYgY2xhc3M9XFxcImZvcm0tZ3JvdXAgb25lLXBsYXllci1zZXR0aW5nIGRpZmZpY3VsdHlcXFwiPlxcbiAgICAgICAgPGxhYmVsIGZvcj1cXFwiZGlmZmljdWx0eS1pbnB1dFxcXCI+RGlmZmljdWx0eTo8L2xhYmVsPlxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwic2VsZWN0LXdyYXBwZXJcXFwiPlxcbiAgICAgICAgICA8c2VsZWN0IG5hbWU9XFxcImRpZmZpY3VsdHlcXFwiIGlkPVxcXCJkaWZmaWN1bHR5LWlucHV0XFxcIiBhdXRvY29tcGxldGU9XFxcIm9mZlxcXCIgcmVxdWlyZWQ+XFxuICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cXFwiZWFzeVxcXCIgc2VsZWN0ZWQ+RWFzeTwvb3B0aW9uPlxcbiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XFxcImhhcmRcXFwiPkhhcmQ8L29wdGlvbj5cXG4gICAgICAgICAgPC9zZWxlY3Q+XFxuICAgICAgICA8L2Rpdj5cXG4gICAgICA8L2Rpdj5cXG4gICAgICA8ZGl2IGNsYXNzPVxcXCJmb3JtLWdyb3VwIG9uZS1wbGF5ZXItc2V0dGluZyBwbGF5LWFzXFxcIj5cXG4gICAgICAgIDxsYWJlbCBmb3I9XFxcInBsYXktYXMtaW5wdXRcXFwiPlBsYXkgYXM6PC9sYWJlbD5cXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcInNlbGVjdC13cmFwcGVyXFxcIj5cXG4gICAgICAgICAgPHNlbGVjdCBuYW1lPVxcXCJwbGF5QXNcXFwiIGlkPVxcXCJwbGF5LWFzLWlucHV0XFxcIiBhdXRvY29tcGxldGU9XFxcIm9mZlxcXCIgcmVxdWlyZWQ+XFxuICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cXFwiUmViZWxsaW9uXFxcIiBzZWxlY3RlZD5SZWJlbCBBbGxpYW5jZTwvb3B0aW9uPlxcbiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XFxcIkVtcGlyZVxcXCI+R2FsYWN0aWMgRW1waXJlPC9vcHRpb24+XFxuICAgICAgICAgIDwvc2VsZWN0PlxcbiAgICAgICAgPC9kaXY+XFxuICAgICAgPC9kaXY+XFxuICAgIFwiO1xuICAgICAgaWYgKHR5cGVvZiBsb2NhdGlvbiA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihsb2NhdGlvbikuYXBwZW5kQ2hpbGQob25lUGxheWVyU2V0dGluZ3MpO1xuICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGxvY2F0aW9uKSkge1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGxvY2F0aW9uWzBdKS5pbnNlcnRCZWZvcmUob25lUGxheWVyU2V0dGluZ3MsIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobG9jYXRpb25bMV0pKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVtb3ZlT25lUGxheWVyU2V0dGluZ3NcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlT25lUGxheWVyU2V0dGluZ3MobG9jYXRpb24pIHtcbiAgICAgIHZhciBvbmVQbGF5ZXJTZXR0aW5ncyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJcIi5jb25jYXQobG9jYXRpb24sIFwiIC5vbmUtcGxheWVyLXNldHRpbmdzXCIpKTtcbiAgICAgIG9uZVBsYXllclNldHRpbmdzID8gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihsb2NhdGlvbikucmVtb3ZlQ2hpbGQob25lUGxheWVyU2V0dGluZ3MpIDogbnVsbDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyR2FtZVNldHRpbmdzXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlckdhbWVTZXR0aW5ncyhsb2NhdGlvbikge1xuICAgICAgdmFyIGdhbWVTZXR0aW5ncyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgZ2FtZVNldHRpbmdzLmNsYXNzTGlzdC5hZGQoJ2dhbWUtc2V0dGluZ3MtY29udGFpbmVyJyk7XG4gICAgICBnYW1lU2V0dGluZ3MuaW5uZXJIVE1MID0gXCJcXG4gICAgICA8aDM+U3RhcnQgYSBOZXcgR2FtZTwvaDM+XFxuICAgICAgPGZvcm0gY2xhc3M9XFxcImdhbWUtc2V0dGluZ3MtZm9ybVxcXCIgbm92YWxpZGF0ZT5cXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImZvcm0tZ3JvdXAgcGxheWVyc1xcXCI+XFxuICAgICAgICAgIDxsYWJlbCBmb3I9XFxcInBsYXllcnMtaW5wdXRcXFwiPlBsYXllcnM6PC9sYWJlbD5cXG4gICAgICAgICAgPGRpdiBjbGFzcz1cXFwic2VsZWN0LXdyYXBwZXJcXFwiPlxcbiAgICAgICAgICAgIDxzZWxlY3QgbmFtZT1cXFwicGxheWVyc1xcXCIgaWQ9XFxcInBsYXllcnMtaW5wdXRcXFwiIGF1dG9jb21wbGV0ZT1cXFwib2ZmXFxcIiByZXF1aXJlZD5cXG4gICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XFxcIjEtcGxheWVyXFxcIiBzZWxlY3RlZD5PcmdhbmljIHZzLiBEcm9pZCAoMS1QbGF5ZXIpPC9vcHRpb24+XFxuICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVxcXCIyLXBsYXllclxcXCI+T3JnYW5pYyB2cy4gT3JnYW5pYyAoMi1QbGF5ZXIpPC9vcHRpb24+XFxuICAgICAgICAgICAgPC9zZWxlY3Q+XFxuICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgPC9kaXY+XFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJidXR0b24tZ3JvdXBcXFwiPlxcbiAgICAgICAgICA8YnV0dG9uIHR5cGU9XFxcInN1Ym1pdFxcXCIgY2xhc3M9XFxcImJ1dHRvbiBzdGFydC1idXR0b25cXFwiPlN0YXJ0PC9idXR0b24+XFxuICAgICAgICA8L2Rpdj5cXG4gICAgICA8L2Zvcm0+XFxuICAgIFwiO1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihsb2NhdGlvbikuYXBwZW5kQ2hpbGQoZ2FtZVNldHRpbmdzKTtcbiAgICAgIHRoaXMudG9nZ2xlT25lUGxheWVyU2V0dGluZ3MoJzEtcGxheWVyJyk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbW92ZUdhbWVTZXR0aW5nc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVHYW1lU2V0dGluZ3MobG9jYXRpb24pIHtcbiAgICAgIHZhciBnYW1lU2V0dGluZ3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiXCIuY29uY2F0KGxvY2F0aW9uLCBcIiAuZ2FtZS1zZXR0aW5ncy1jb250YWluZXJcIikpO1xuICAgICAgZ2FtZVNldHRpbmdzID8gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihsb2NhdGlvbikucmVtb3ZlQ2hpbGQoZ2FtZVNldHRpbmdzKSA6IG51bGw7XG4gICAgfVxuICB9XSk7XG4gIHJldHVybiBHYW1lU2V0dGluZ3M7XG59KCk7XG5leHBvcnQgZGVmYXVsdCBHYW1lU2V0dGluZ3M7IiwiZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH1cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG52YXIgTmV3R2FtZU1vZGFsID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gTmV3R2FtZU1vZGFsKCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBOZXdHYW1lTW9kYWwpO1xuICB9XG4gIF9jcmVhdGVDbGFzcyhOZXdHYW1lTW9kYWwsIFt7XG4gICAga2V5OiBcInJlbmRlcldpbm5pbmdQbGF5ZXJJY29uXCIsXG4gICAgdmFsdWU6XG4gICAgLy8gRE9NIG1ldGhvZHNcbiAgICBmdW5jdGlvbiByZW5kZXJXaW5uaW5nUGxheWVySWNvbih3aW5uZXIsIGxvY2F0aW9uKSB7XG4gICAgICB2YXIgd2lubmluZ1BsYXllckljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIHdpbm5pbmdQbGF5ZXJJY29uLmNsYXNzTGlzdC5hZGQoJ3dpbm5pbmctcGxheWVyLWljb24nKTtcbiAgICAgIGlmICh3aW5uZXIgPT09ICdkcmF3Jykge1xuICAgICAgICB3aW5uaW5nUGxheWVySWNvbi5pbm5lckhUTUwgPSBcIlxcbiAgICAgICAgPHNwYW4gY2xhc3M9XFxcImZhLWJyYW5kcyBmYS1yZWJlbCByZWJlbGxpb24taWNvblxcXCIgYXJpYS1oaWRkZW49XFxcInRydWVcXFwiPjwvc3Bhbj5cXG4gICAgICAgIDxzcGFuIGNsYXNzPVxcXCJmYS1icmFuZHMgZmEtZW1waXJlIGVtcGlyZS1pY29uXFxcIiBhcmlhLWhpZGRlbj1cXFwidHJ1ZVxcXCI+PC9zcGFuPlxcbiAgICAgIFwiO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd2lubmluZ1BsYXllckljb24uaW5uZXJIVE1MID0gXCI8c3BhbiBjbGFzcz1cXFwiZmEtYnJhbmRzIGZhLVwiLmNvbmNhdCh3aW5uZXIgPT09ICdSZWJlbGxpb24nID8gJ3JlYmVsJyA6ICdlbXBpcmUnLCBcIiBcIikuY29uY2F0KHdpbm5lci50b0xvd2VyQ2FzZSgpLCBcIi1pY29uXFxcIiBhcmlhLWhpZGRlbj1cXFwidHJ1ZVxcXCI+PC9zcGFuPlwiKTtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgbG9jYXRpb24gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobG9jYXRpb24pLmFwcGVuZENoaWxkKHdpbm5pbmdQbGF5ZXJJY29uKTtcbiAgICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShsb2NhdGlvbikpIHtcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihsb2NhdGlvblswXSkuaW5zZXJ0QmVmb3JlKHdpbm5pbmdQbGF5ZXJJY29uLCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGxvY2F0aW9uWzFdKSk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbmRlck5ld0dhbWVNb2RhbFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJOZXdHYW1lTW9kYWwoZW5kR2FtZU1lc3NhZ2UsIHdpbm5lciwgbG9jYXRpb24pIHtcbiAgICAgIHZhciBuZXdHYW1lTW9kYWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIG5ld0dhbWVNb2RhbC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ21vZGFsJyk7XG4gICAgICBuZXdHYW1lTW9kYWwuY2xhc3NMaXN0LmFkZCgnbW9kYWwnKTtcbiAgICAgIG5ld0dhbWVNb2RhbC5pbm5lckhUTUwgPSBcIlxcbiAgICAgIDxkaXYgY2xhc3M9XFxcIm1vZGFsLWNvbnRlbnRcXFwiPlxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwibW9kYWwtYm9keVxcXCI+XFxuICAgICAgICAgIDxwIGNsYXNzPVxcXCJlbmQtZ2FtZS1tZXNzYWdlXFxcIj5cIi5jb25jYXQoZW5kR2FtZU1lc3NhZ2UsIFwiPC9wPlxcbiAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJidXR0b24tZ3JvdXBcXFwiPlxcbiAgICAgICAgICAgIDxidXR0b24gdHlwZT1cXFwiYnV0dG9uXFxcIiBjbGFzcz1cXFwiYnV0dG9uIHJlc3RhcnQtYnV0dG9uXFxcIj5QbGF5IEFnYWluPC9idXR0b24+XFxuICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVxcXCJidXR0b25cXFwiIGNsYXNzPVxcXCJidXR0b24gZ2FtZS1zZXR0aW5ncy1idXR0b25cXFwiPlNldHRpbmdzPC9idXR0b24+XFxuICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgPC9kaXY+XFxuICAgICAgPC9kaXY+XFxuICAgIFwiKTtcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobG9jYXRpb24pLmFwcGVuZENoaWxkKG5ld0dhbWVNb2RhbCk7XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5JykuY2xhc3NMaXN0LmFkZCgnbW9kYWwtb3BlbicpO1xuICAgICAgdGhpcy5yZW5kZXJXaW5uaW5nUGxheWVySWNvbih3aW5uZXIsIFsnI21vZGFsIC5tb2RhbC1ib2R5JywgJy5lbmQtZ2FtZS1tZXNzYWdlJ10pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW1vdmVOZXdHYW1lTW9kYWxcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlTmV3R2FtZU1vZGFsKGxvY2F0aW9uKSB7XG4gICAgICB2YXIgbmV3R2FtZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIlwiLmNvbmNhdChsb2NhdGlvbiwgXCIgI21vZGFsXCIpKTtcbiAgICAgIG5ld0dhbWVNb2RhbCA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobG9jYXRpb24pLnJlbW92ZUNoaWxkKG5ld0dhbWVNb2RhbCkgOiBudWxsO1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpLmNsYXNzTGlzdC5yZW1vdmUoJ21vZGFsLW9wZW4nKTtcbiAgICB9XG4gIH1dKTtcbiAgcmV0dXJuIE5ld0dhbWVNb2RhbDtcbn0oKTtcbmV4cG9ydCBkZWZhdWx0IE5ld0dhbWVNb2RhbDsiLCJmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxudmFyIFBsYXllciA9IGZ1bmN0aW9uIFBsYXllcihwbGF5ZXJUeXBlLCBwbGF5QXMpIHtcbiAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFBsYXllcik7XG4gIHRoaXMucGxheWVyVHlwZSA9IHBsYXllclR5cGU7XG4gIHRoaXMucGxheUFzID0gcGxheUFzO1xufTtcbmV4cG9ydCBkZWZhdWx0IFBsYXllcjsiLCJmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfVxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH1cbmltcG9ydCBOZXdHYW1lTW9kYWwgZnJvbSAnLi9OZXdHYW1lTW9kYWwnO1xuaW1wb3J0IFBsYXllciBmcm9tICcuL1BsYXllcic7XG52YXIgR2FtZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIEdhbWUoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEdhbWUpO1xuICAgIHRoaXMubmV3R2FtZU1vZGFsID0gbmV3IE5ld0dhbWVNb2RhbCgpO1xuICAgIHRoaXMud2lubmluZ0NvbWJpbmF0aW9ucyA9IFtbMCwgMSwgMl0sIFszLCA0LCA1XSwgWzYsIDcsIDhdLCBbMCwgMywgNl0sIFsxLCA0LCA3XSwgWzIsIDUsIDhdLCBbMCwgNCwgOF0sIFsyLCA0LCA2XV07XG4gICAgdGhpcy5nYW1lU2V0dGluZ3M7XG4gICAgdGhpcy5ib2FyZDtcbiAgICB0aGlzLnBsYXllck9uZTtcbiAgICB0aGlzLnBsYXllclR3bztcbiAgICB0aGlzLmN1cnJlbnRQbGF5ZXIgPSBudWxsO1xuICAgIHRoaXMuYWlNb3ZlRGVsYXk7XG4gIH1cblxuICAvLyBUcmlnZ2VycyB0aGUgc3RhcnROZXdHYW1lKCkgZnVuY3Rpb24gd2hlbiB0aGUgUmVzdGFydCBidXR0b24gaXMgY2xpY2tlZFxuICBfY3JlYXRlQ2xhc3MoR2FtZSwgW3tcbiAgICBrZXk6IFwicmVzdGFydFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZXN0YXJ0KCkge1xuICAgICAgdGhpcy5zdGFydE5ld0dhbWUodGhpcy5nYW1lU2V0dGluZ3MpO1xuICAgIH1cblxuICAgIC8vIFJlbW92ZSBib3RoIGdhbWUgYW5kIG1vZGFsIGZyb20gRE9NXG4gIH0sIHtcbiAgICBrZXk6IFwicmVtb3ZlR2FtZUFuZE1vZGFsXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZUdhbWVBbmRNb2RhbCgpIHtcbiAgICAgIHRoaXMubmV3R2FtZU1vZGFsLnJlbW92ZU5ld0dhbWVNb2RhbCgnbWFpbicpO1xuICAgICAgdGhpcy5yZW1vdmVHYW1lQm9hcmQoJy5nYW1lLWNvbnRhaW5lcicpO1xuICAgIH1cblxuICAgIC8vIFJlc2V0cyBhbmQgcmVuZGVycyB0aGUgZ2FtZSBib2FyZCBmb3IgYSBuZXcgZ2FtZVxuICB9LCB7XG4gICAga2V5OiBcInN0YXJ0TmV3R2FtZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzdGFydE5ld0dhbWUoZ2FtZVNldHRpbmdzKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5haU1vdmVEZWxheSk7XG4gICAgICB0aGlzLmdhbWVTZXR0aW5ncyA9IGdhbWVTZXR0aW5ncztcbiAgICAgIHRoaXMuYm9hcmQgPSBuZXcgQXJyYXkoOSkuZmlsbCgpLm1hcChmdW5jdGlvbiAoc3F1YXJlLCBpbmRleCkge1xuICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgICB9KTtcbiAgICAgIGlmIChnYW1lU2V0dGluZ3MucGxheWVycyA9PT0gJzEtcGxheWVyJykge1xuICAgICAgICB0aGlzLnBsYXllck9uZSA9IG5ldyBQbGF5ZXIoJ2h1bWFuJywgZ2FtZVNldHRpbmdzLnBsYXlBcyk7XG4gICAgICAgIHRoaXMucGxheWVyVHdvID0gbmV3IFBsYXllcignYWknLCBnYW1lU2V0dGluZ3MucGxheUFzID09PSAnUmViZWxsaW9uJyA/ICdFbXBpcmUnIDogJ1JlYmVsbGlvbicpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5wbGF5ZXJPbmUgPSBuZXcgUGxheWVyKCdodW1hbicsICdSZWJlbGxpb24nKTtcbiAgICAgICAgdGhpcy5wbGF5ZXJUd28gPSBuZXcgUGxheWVyKCdodW1hbicsICdFbXBpcmUnKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuY3VycmVudFBsYXllciA9IHRoaXMucGxheWVyT25lO1xuICAgICAgdGhpcy5uZXdHYW1lTW9kYWwucmVtb3ZlTmV3R2FtZU1vZGFsKCdtYWluJyk7XG4gICAgICB0aGlzLnJlbW92ZUdhbWVCb2FyZCgnLmdhbWUtY29udGFpbmVyJyk7XG4gICAgICB0aGlzLnJlbmRlckdhbWVCb2FyZCh0aGlzLmN1cnJlbnRQbGF5ZXIsICcuZ2FtZS1jb250YWluZXInKTtcbiAgICB9XG5cbiAgICAvLyBDbGljayBoYW5kbGVyIHRoYXQgYWxsb3dzIHRoZSBjdXJyZW50IHBsYXllciB0byBzZWxlY3QgYSBzcXVhcmUgaWYgaXQgaXMgdGhlIHVzZXIncyB0dXJuXG4gIH0sIHtcbiAgICBrZXk6IFwic2VsZWN0U3F1YXJlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNlbGVjdFNxdWFyZShldmVudCkge1xuICAgICAgaWYgKHRoaXMuY3VycmVudFBsYXllci5wbGF5ZXJUeXBlID09PSAnaHVtYW4nKSB7XG4gICAgICAgIHRoaXMucGxheVR1cm4oZXZlbnQudGFyZ2V0LmlkKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBQbGF5cyB0aGUgY3VycmVudCBwbGF5ZXIncyBzZWxlY3RlZCBzcXVhcmUgYW5kIHRoZW4gY2hhbmdlcyB0byB0aGUgb3Bwb3NpbmcgcGxheWVyJ3MgdHVybiBpZiB0aGUgZ2FtZSBoYXNuJ3QgZW5kZWRcbiAgfSwge1xuICAgIGtleTogXCJwbGF5VHVyblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBwbGF5VHVybihzcXVhcmUpIHtcbiAgICAgIGlmICh0eXBlb2YgdGhpcy5ib2FyZFtzcXVhcmVdID09PSAnbnVtYmVyJykge1xuICAgICAgICB0aGlzLmJvYXJkW3NxdWFyZV0gPSB0aGlzLmN1cnJlbnRQbGF5ZXIucGxheUFzLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIHRoaXMuYWRkQXR0cmlidXRlc1RvU2VsZWN0ZWRTcXVhcmUoc3F1YXJlKTtcbiAgICAgICAgaWYgKHRoaXMuY2hlY2tGb3JXaW5uZXIodGhpcy5jdXJyZW50UGxheWVyKSkge1xuICAgICAgICAgIHRoaXMuaGlnaGxpZ2h0V2lubmluZ1NxdWFyZXModGhpcy5jdXJyZW50UGxheWVyKTtcbiAgICAgICAgICB0aGlzLmVuZEdhbWUodGhpcy5jdXJyZW50UGxheWVyLnBsYXlBcyk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5jaGVja0ZvckRyYXcoKSkge1xuICAgICAgICAgIHRoaXMuZW5kR2FtZSgnZHJhdycpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuY3VycmVudFBsYXllciA9PT0gdGhpcy5wbGF5ZXJPbmUgPyB0aGlzLmN1cnJlbnRQbGF5ZXIgPSB0aGlzLnBsYXllclR3byA6IHRoaXMuY3VycmVudFBsYXllciA9IHRoaXMucGxheWVyT25lO1xuICAgICAgICAgIHRoaXMudXBkYXRlQ3VycmVudFR1cm5NZXNzYWdlKCk7XG4gICAgICAgICAgaWYgKHRoaXMuY3VycmVudFBsYXllci5wbGF5ZXJUeXBlID09PSAnYWknKSB0aGlzLmFpTW92ZURlbGF5ID0gc2V0VGltZW91dCh0aGlzLmNoYW5nZVRvQWlUdXJuLmJpbmQodGhpcyksIDEyMDApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRGV0ZXJtaW5lcyB3aGV0aGVyIHRvIHBsYXkgdGhlIEVhc3kgQUkgb3IgdGhlIEhhcmQgQUlcbiAgfSwge1xuICAgIGtleTogXCJjaGFuZ2VUb0FpVHVyblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjaGFuZ2VUb0FpVHVybigpIHtcbiAgICAgIGlmICh0aGlzLmdhbWVTZXR0aW5ncy5kaWZmaWN1bHR5ID09PSAnaGFyZCcpIHtcbiAgICAgICAgdGhpcy5wbGF5U21hcnRBaVR1cm4oKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucGxheVJhbmRvbUFpVHVybigpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEFJIHBpY2tzIGFuIHVucGxheWVkIHNxdWFyZSBhdCByYW5kb20gKEVhc3kgbW9kZSlcbiAgfSwge1xuICAgIGtleTogXCJwbGF5UmFuZG9tQWlUdXJuXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHBsYXlSYW5kb21BaVR1cm4oKSB7XG4gICAgICB2YXIgYXZhaWxhYmxlU3F1YXJlcyA9IHRoaXMuY2hlY2tBdmFpbGFibGVTcXVhcmVzKCk7XG4gICAgICB0aGlzLnBsYXlUdXJuKGF2YWlsYWJsZVNxdWFyZXNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogYXZhaWxhYmxlU3F1YXJlcy5sZW5ndGgpXSk7XG4gICAgfVxuXG4gICAgLy8gQUkgcGlja3MgYW4gdW5wbGF5ZWQgc3F1YXJlIHVzaW5nIHRoZSBtaW5pbWF4IGFsZ29yaXRobSAoSGFyZCBtb2RlKVxuICB9LCB7XG4gICAga2V5OiBcInBsYXlTbWFydEFpVHVyblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBwbGF5U21hcnRBaVR1cm4oKSB7XG4gICAgICB0aGlzLnBsYXlUdXJuKHRoaXMuaGFuZGxlTWluaW1heCh0aGlzLmJvYXJkLCB0aGlzLnBsYXllclR3by5wbGF5QXMpLmluZGV4KTtcbiAgICB9XG5cbiAgICAvLyBNaW5pbWF4IGFsZ29yaXRobSB3aGljaCBkZXRlcm1pbmVzIHRoZSBiZXN0IG1vdmUgdGhlIEFJIHNob3VsZCBwbGF5IGFnYWluc3QgdGhlIHVzZXIgZHVyaW5nIGl0cyB0dXJuXG4gIH0sIHtcbiAgICBrZXk6IFwiaGFuZGxlTWluaW1heFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVNaW5pbWF4KGJvYXJkLCBwbGF5ZXIpIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICB2YXIgYXZhaWxhYmxlU3F1YXJlcyA9IHRoaXMuY2hlY2tBdmFpbGFibGVTcXVhcmVzKGJvYXJkKTtcbiAgICAgIHZhciBiZXN0VGVzdE1vdmUgPSBudWxsO1xuICAgICAgdmFyIGJlc3RTY29yZTtcblxuICAgICAgLy8gSHVtYW4gcGxheWVyIChtaW5pbWl6aW5nIHBsYXllcilcbiAgICAgIGlmICh0aGlzLmNoZWNrRm9yV2lubmVyKHRoaXMucGxheWVyT25lKSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNjb3JlOiAtMVxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgLy8gQUkgcGxheWVyIChtYXhpbWl6aW5nIHBsYXllcilcbiAgICAgIGVsc2UgaWYgKHRoaXMuY2hlY2tGb3JXaW5uZXIodGhpcy5wbGF5ZXJUd28pKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc2NvcmU6IDFcbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5jaGVja0ZvckRyYXcoKSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNjb3JlOiAwXG4gICAgICAgIH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBSZWN1cnNpdmVseSB0ZXN0cyBwb3RlbnRpYWwgbW92ZSBvdXRjb21lcyBmb3IgdGhlIGN1cnJlbnQgcGxheWVyXG4gICAgICAgIHZhciB0ZXN0TW92ZXMgPSBhdmFpbGFibGVTcXVhcmVzLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBzcXVhcmUpIHtcbiAgICAgICAgICB2YXIgdGVzdE1vdmUgPSB7fTtcbiAgICAgICAgICB2YXIgcmVzdWx0O1xuICAgICAgICAgIHRlc3RNb3ZlLmluZGV4ID0gYm9hcmRbc3F1YXJlXTtcbiAgICAgICAgICBib2FyZFtzcXVhcmVdID0gcGxheWVyLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgaWYgKHBsYXllciA9PT0gX3RoaXMucGxheWVyVHdvLnBsYXlBcykge1xuICAgICAgICAgICAgcmVzdWx0ID0gX3RoaXMuaGFuZGxlTWluaW1heChib2FyZCwgX3RoaXMucGxheWVyT25lLnBsYXlBcyk7XG4gICAgICAgICAgICB0ZXN0TW92ZS5zY29yZSA9IHJlc3VsdC5zY29yZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzdWx0ID0gX3RoaXMuaGFuZGxlTWluaW1heChib2FyZCwgX3RoaXMucGxheWVyVHdvLnBsYXlBcyk7XG4gICAgICAgICAgICB0ZXN0TW92ZS5zY29yZSA9IHJlc3VsdC5zY29yZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYm9hcmRbc3F1YXJlXSA9IHRlc3RNb3ZlLmluZGV4O1xuICAgICAgICAgIGFjYy5wdXNoKHRlc3RNb3ZlKTtcbiAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICB9LCBbXSk7XG5cbiAgICAgICAgLy8gVXNlcyBhcnJheSBvZiB0ZXN0IHNjb3JlcyB0byBkZXRlcm1pbmUgdGhlIGJlc3QgbW92ZSBmb3IgdGhlIEFJIHRvIHBsYXlcbiAgICAgICAgaWYgKHBsYXllciA9PT0gdGhpcy5wbGF5ZXJUd28ucGxheUFzKSB7XG4gICAgICAgICAgYmVzdFNjb3JlID0gLUluZmluaXR5O1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGVzdE1vdmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAodGVzdE1vdmVzW2ldLnNjb3JlID4gYmVzdFNjb3JlKSB7XG4gICAgICAgICAgICAgIGJlc3RTY29yZSA9IHRlc3RNb3Zlc1tpXS5zY29yZTtcbiAgICAgICAgICAgICAgYmVzdFRlc3RNb3ZlID0gaTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYmVzdFNjb3JlID0gSW5maW5pdHk7XG4gICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IHRlc3RNb3Zlcy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGlmICh0ZXN0TW92ZXNbX2ldLnNjb3JlIDwgYmVzdFNjb3JlKSB7XG4gICAgICAgICAgICAgIGJlc3RTY29yZSA9IHRlc3RNb3Zlc1tfaV0uc2NvcmU7XG4gICAgICAgICAgICAgIGJlc3RUZXN0TW92ZSA9IF9pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGVzdE1vdmVzW2Jlc3RUZXN0TW92ZV07XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2hlY2tzIHRoZSBib2FyZCB0byBzZWUgaWYgdGhlIGN1cnJlbnQgcGxheWVyIGhhcyBtYXRjaGVkIG9uZSBvZiB0aGUgcG9zc2libGUgd2lubmluZyBjb21iaW5hdGlvbnNcbiAgfSwge1xuICAgIGtleTogXCJjaGVja0Zvcldpbm5lclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjaGVja0Zvcldpbm5lcihwbGF5ZXIpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuICAgICAgcmV0dXJuIHRoaXMud2lubmluZ0NvbWJpbmF0aW9ucy5maW5kKGZ1bmN0aW9uIChjb21iaW5hdGlvbikge1xuICAgICAgICByZXR1cm4gY29tYmluYXRpb24uZXZlcnkoZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgIHJldHVybiBfdGhpczIuYm9hcmRbdmFsXSA9PT0gcGxheWVyLnBsYXlBcy50b0xvd2VyQ2FzZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIENoZWNrcyB0aGUgYm9hcmQgdG8gc2VlIGlmIGV2ZXJ5IHNxdWFyZSBoYXMgYmVlbiBmaWxsZWQgd2l0aG91dCBhIHdpbm5lclxuICB9LCB7XG4gICAga2V5OiBcImNoZWNrRm9yRHJhd1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjaGVja0ZvckRyYXcoKSB7XG4gICAgICByZXR1cm4gdGhpcy5ib2FyZC5ldmVyeShmdW5jdGlvbiAoc3F1YXJlKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2Ygc3F1YXJlICE9PSAnbnVtYmVyJztcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIENoZWNrcyB0byBzZWUgd2hpY2ggc3F1YXJlcyBvbiB0aGUgYm9hcmQgaGF2ZW4ndCBiZWVuIHBsYXllZCB5ZXQgaW4gdGhlIGN1cnJlbnQgZ2FtZVxuICB9LCB7XG4gICAga2V5OiBcImNoZWNrQXZhaWxhYmxlU3F1YXJlc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjaGVja0F2YWlsYWJsZVNxdWFyZXMoKSB7XG4gICAgICByZXR1cm4gdGhpcy5ib2FyZC5maWx0ZXIoZnVuY3Rpb24gKHNxdWFyZSkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHNxdWFyZSA9PT0gJ251bWJlcic7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBFbmRzIHRoZSBjdXJyZW50IGdhbWUgaWYgYSBwbGF5ZXIgaGFzIHdvbiBvciBpZiB0aGVyZSBpcyBhIGRyYXdcbiAgfSwge1xuICAgIGtleTogXCJlbmRHYW1lXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGVuZEdhbWUod2lubmVyKSB7XG4gICAgICB2YXIgZW5kR2FtZU1lc3NhZ2U7XG4gICAgICB3aW5uZXIgPT09ICdkcmF3JyA/IGVuZEdhbWVNZXNzYWdlID0gJ0l0XFwncyBhIGRyYXchJyA6IGVuZEdhbWVNZXNzYWdlID0gXCJUaGUgXCIuY29uY2F0KHdpbm5lciwgXCIgd29uIVwiKTtcbiAgICAgIHRoaXMubmV3R2FtZU1vZGFsLnJlbmRlck5ld0dhbWVNb2RhbChlbmRHYW1lTWVzc2FnZSwgd2lubmVyLCAnbWFpbicpO1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNxdWFyZScpLmZvckVhY2goZnVuY3Rpb24gKHNxdWFyZSkge1xuICAgICAgICBzcXVhcmUuY2xhc3NMaXN0LmFkZCgnZ2FtZS1lbmRlZCcpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gRE9NIG1ldGhvZHNcbiAgfSwge1xuICAgIGtleTogXCJ1cGRhdGVDdXJyZW50VHVybk1lc3NhZ2VcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlQ3VycmVudFR1cm5NZXNzYWdlKCkge1xuICAgICAgdmFyIGN1cnJlbnRUdXJuTWVzc2FnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jdXJyZW50LXR1cm4tbWVzc2FnZScpO1xuICAgICAgY3VycmVudFR1cm5NZXNzYWdlLmlubmVySFRNTCA9IFwiSXQncyB0aGUgXCIuY29uY2F0KHRoaXMuY3VycmVudFBsYXllci5wbGF5QXMsIFwiJ3MgdHVybi5cIik7XG4gICAgICA7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImFkZEF0dHJpYnV0ZXNUb1NlbGVjdGVkU3F1YXJlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGFkZEF0dHJpYnV0ZXNUb1NlbGVjdGVkU3F1YXJlKHNxdWFyZSkge1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc3F1YXJlKS5jbGFzc0xpc3QuYWRkKFwiZmEtXCIuY29uY2F0KHRoaXMuY3VycmVudFBsYXllci5wbGF5QXMgPT09ICdSZWJlbGxpb24nID8gJ3JlYmVsJyA6ICdlbXBpcmUnKSwgXCJcIi5jb25jYXQodGhpcy5jdXJyZW50UGxheWVyLnBsYXlBcy50b0xvd2VyQ2FzZSgpLCBcIi1pY29uXCIpLCAnc2VsZWN0ZWQnKTtcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHNxdWFyZSkuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgdGhpcy5jdXJyZW50UGxheWVyLnBsYXlBcyA9PT0gJ1JlYmVsbGlvbicgPyAncmViZWwnIDogJ2VtcGlyZScpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJoaWdobGlnaHRXaW5uaW5nU3F1YXJlc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBoaWdobGlnaHRXaW5uaW5nU3F1YXJlcyhwbGF5ZXIpIHtcbiAgICAgIHZhciB3aW5uaW5nU3F1YXJlcyA9IHRoaXMuY2hlY2tGb3JXaW5uZXIocGxheWVyKTtcbiAgICAgIHJldHVybiB3aW5uaW5nU3F1YXJlcy5tYXAoZnVuY3Rpb24gKHNxdWFyZSkge1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzcXVhcmUpLmNsYXNzTGlzdC5hZGQoJ3dpbm5pbmctc3F1YXJlJyk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyR2FtZUJvYXJkXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlckdhbWVCb2FyZChmaXJzdFBsYXllciwgbG9jYXRpb24pIHtcbiAgICAgIHZhciBnYW1lQm9hcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIGdhbWVCb2FyZC5jbGFzc0xpc3QuYWRkKCdib2FyZC1jb250YWluZXInKTtcbiAgICAgIGdhbWVCb2FyZC5pbm5lckhUTUwgPSBcIlxcbiAgICAgIDxwIGNsYXNzPVxcXCJjdXJyZW50LXR1cm4tbWVzc2FnZVxcXCI+VGhlIFwiLmNvbmNhdChmaXJzdFBsYXllci5wbGF5QXMsIFwiIGdvZXMgZmlyc3QhPC9wPlxcbiAgICAgIDxkaXYgY2xhc3M9XFxcImdhbWUtYm9hcmRcXFwiPlwiKS5jb25jYXQodGhpcy5ib2FyZC5tYXAoZnVuY3Rpb24gKHNxdWFyZSwgaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIFwiPGRpdiBjbGFzcz1cXFwic3F1YXJlLWNvbnRhaW5lclxcXCI+XFxuICAgICAgICAgIDxidXR0b24gY2xhc3M9XFxcInNxdWFyZSBmYS1icmFuZHNcXFwiIGlkPVxcXCJcIi5jb25jYXQoaW5kZXgsIFwiXFxcIj48L2J1dHRvbj5cXG4gICAgICAgIDwvZGl2PlwiKTtcbiAgICAgIH0pLmpvaW4oJycpLCBcIjwvZGl2PlxcbiAgICAgIDxidXR0b24gdHlwZT1cXFwiYnV0dG9uXFxcIiBjbGFzcz1cXFwiYnV0dG9uIHJlc3RhcnQtYnV0dG9uXFxcIj5SZXN0YXJ0PC9idXR0b24+XFxuICAgIFwiKTtcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobG9jYXRpb24pLmFwcGVuZENoaWxkKGdhbWVCb2FyZCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbW92ZUdhbWVCb2FyZFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVHYW1lQm9hcmQobG9jYXRpb24pIHtcbiAgICAgIHZhciBnYW1lQm9hcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiXCIuY29uY2F0KGxvY2F0aW9uLCBcIiAuYm9hcmQtY29udGFpbmVyXCIpKTtcbiAgICAgIGdhbWVCb2FyZCA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobG9jYXRpb24pLnJlbW92ZUNoaWxkKGdhbWVCb2FyZCkgOiBudWxsO1xuICAgIH1cbiAgfV0pO1xuICByZXR1cm4gR2FtZTtcbn0oKTtcbmV4cG9ydCBkZWZhdWx0IEdhbWU7IiwiZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH1cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5pbXBvcnQgSGVhZGVyIGZyb20gJy4vbW9kdWxlcy9IZWFkZXInO1xuaW1wb3J0IEZvb3RlciBmcm9tICcuL21vZHVsZXMvRm9vdGVyJztcbmltcG9ydCBHYW1lU2V0dGluZ3MgZnJvbSAnLi9tb2R1bGVzL0dhbWVTZXR0aW5ncyc7XG5pbXBvcnQgR2FtZSBmcm9tICcuL21vZHVsZXMvR2FtZSc7XG52YXIgQXBwID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gQXBwKCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBBcHApO1xuICAgIHRoaXMuaGVhZGVyID0gbmV3IEhlYWRlcigpO1xuICAgIHRoaXMuZm9vdGVyID0gbmV3IEZvb3RlcigpO1xuICAgIHRoaXMuZ2FtZSA9IG5ldyBHYW1lKCk7XG4gICAgdGhpcy5nYW1lU2V0dGluZ3MgPSBuZXcgR2FtZVNldHRpbmdzKHRoaXMuZ2FtZSk7XG4gICAgdGhpcy5yZW5kZXJBcHAoKTtcbiAgfVxuXG4gIC8vIEV2ZW50IGxpc3RlbmVyc1xuICBfY3JlYXRlQ2xhc3MoQXBwLCBbe1xuICAgIGtleTogXCJldmVudHNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZXZlbnRzKCkge1xuICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHZhciBlbGVtZW50ID0gZXZlbnQudGFyZ2V0O1xuICAgICAgICBlbGVtZW50Lm1hdGNoZXMoJyNtb2RhbCAuZ2FtZS1zZXR0aW5ncy1idXR0b24nKSA/IF90aGlzLmdhbWVTZXR0aW5ncy5vcGVuR2FtZVNldHRpbmdzKCkgOiBudWxsO1xuICAgICAgICBlbGVtZW50Lm1hdGNoZXMoJy5nYW1lLWJvYXJkIC5zcXVhcmUtY29udGFpbmVyIC5zcXVhcmUnKSA/IF90aGlzLmdhbWUuc2VsZWN0U3F1YXJlKGV2ZW50KSA6IG51bGw7XG4gICAgICAgIGVsZW1lbnQubWF0Y2hlcygnI21vZGFsIC5yZXN0YXJ0LWJ1dHRvbicpID8gX3RoaXMuZ2FtZS5yZXN0YXJ0KCkgOiBudWxsO1xuICAgICAgfSk7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdmFyIGVsZW1lbnQgPSBldmVudC50YXJnZXQ7XG4gICAgICAgIGVsZW1lbnQubWF0Y2hlcygnLmdhbWUtc2V0dGluZ3MtZm9ybSAjcGxheWVycy1pbnB1dCcpID8gX3RoaXMuZ2FtZVNldHRpbmdzLnRvZ2dsZU9uZVBsYXllclNldHRpbmdzKGVsZW1lbnQudmFsdWUpIDogbnVsbDtcbiAgICAgIH0pO1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHZhciBlbGVtZW50ID0gZXZlbnQudGFyZ2V0O1xuICAgICAgICBpZiAoZWxlbWVudC5tYXRjaGVzKCcuZ2FtZS1zZXR0aW5ncy1mb3JtJykpIHtcbiAgICAgICAgICBlbGVtZW50LmRpZmZpY3VsdHkgJiYgZWxlbWVudC5wbGF5QXMgPyBfdGhpcy5nYW1lU2V0dGluZ3MuaGFuZGxlU3VibWl0KGV2ZW50LCB7XG4gICAgICAgICAgICBwbGF5ZXJzOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGxheWVycy1pbnB1dCcpLnZhbHVlLFxuICAgICAgICAgICAgZGlmZmljdWx0eTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RpZmZpY3VsdHktaW5wdXQnKS52YWx1ZSxcbiAgICAgICAgICAgIHBsYXlBczogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BsYXktYXMtaW5wdXQnKS52YWx1ZVxuICAgICAgICAgIH0pIDogX3RoaXMuZ2FtZVNldHRpbmdzLmhhbmRsZVN1Ym1pdChldmVudCwge1xuICAgICAgICAgICAgcGxheWVyczogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BsYXllcnMtaW5wdXQnKS52YWx1ZSxcbiAgICAgICAgICAgIGRpZmZpY3VsdHk6IG51bGwsXG4gICAgICAgICAgICBwbGF5QXM6IG51bGxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gRE9NIG1ldGhvZHNcbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJBcHBcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyQXBwKCkge1xuICAgICAgdGhpcy5oZWFkZXIucmVuZGVySGVhZGVyKCcjYXBwJyk7XG4gICAgICB0aGlzLnJlbmRlck1haW4oJyNhcHAnKTtcbiAgICAgIHRoaXMuZm9vdGVyLnJlbmRlckZvb3RlcignI2FwcCcpO1xuICAgICAgdGhpcy5nYW1lU2V0dGluZ3Mub3BlbkdhbWVTZXR0aW5ncygpO1xuICAgICAgdGhpcy5ldmVudHMoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyTWFpblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJNYWluKGxvY2F0aW9uKSB7XG4gICAgICB2YXIgbWFpbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ21haW4nKTtcbiAgICAgIG1haW4uaW5uZXJIVE1MID0gXCI8ZGl2IGNsYXNzPVxcXCJnYW1lLWNvbnRhaW5lclxcXCI+PC9kaXY+XCI7XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGxvY2F0aW9uKS5hcHBlbmRDaGlsZChtYWluKTtcbiAgICB9XG4gIH1dKTtcbiAgcmV0dXJuIEFwcDtcbn0oKTtcbmV4cG9ydCBkZWZhdWx0IEFwcDsiLCJleHBvcnQgZGVmYXVsdCBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiaW5kZXguaHRtbFwiOyIsImV4cG9ydCBkZWZhdWx0IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCJmYXZpY29uLmljb1wiOyIsImltcG9ydCBBcHAgZnJvbSAnLi9BcHAnO1xuaW1wb3J0ICdmaWxlLWxvYWRlcj9uYW1lPVtuYW1lXS5bZXh0XSEuL2luZGV4Lmh0bWwnO1xuaW1wb3J0ICdmaWxlLWxvYWRlcj9uYW1lPVtuYW1lXS5bZXh0XSEuL2Zhdmljb24uaWNvJztcbmltcG9ydCAnbm9ybWFsaXplLmNzcyc7XG5pbXBvcnQgJ0Bmb3J0YXdlc29tZS9mb250YXdlc29tZS1mcmVlL2Nzcy9hbGwubWluLmNzcyc7XG5pbXBvcnQgJy4vc3R5bGVzaGVldHMvc3R5bGUuc2Nzcyc7XG5uZXcgQXBwKCk7Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///232\n')}},__webpack_require__={};__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var e;__webpack_require__.g.importScripts&&(e=__webpack_require__.g.location+"");var n=__webpack_require__.g.document;if(!e&&n&&(n.currentScript&&"SCRIPT"===n.currentScript.tagName.toUpperCase()&&(e=n.currentScript.src),!e)){var c=n.getElementsByTagName("script");if(c.length)for(var t=c.length-1;t>-1&&(!e||!/^http(s?):/.test(e));)e=c[t--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),__webpack_require__.p=e})();var __webpack_exports__={};__webpack_modules__[232](0,__webpack_exports__,__webpack_require__)})();