(()=>{"use strict";var __webpack_modules__={378:(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__)=>{eval('\n// EXTERNAL MODULE: ./src/images/star-wars-logo.png\nvar star_wars_logo = __webpack_require__(432);\n;// CONCATENATED MODULE: ./src/modules/NewGameModal.js\nvar NewGameModal = function () {\n  // Creates the DOM elements for a modal that tells the user who won and to allow them to start a new game\n  function openNewGameModal(endGameMessage, winner) {\n    var newGameModal = document.createElement(\'div\');\n    newGameModal.classList.add(\'modal\');\n    newGameModal.setAttribute(\'id\', \'modal\');\n    newGameModal.innerHTML = "<div class=\\"modal-content\\">\\n      <div class=\\"modal-body\\">\\n        <div class=\\"winning-player-icon\\"></div>\\n        <p>".concat(endGameMessage, "</p>\\n        <div class=\\"button-group\\">\\n          <button type=\\"button\\" class=\\"button restart-button\\">Play Again</button>\\n          <button type=\\"button\\" class=\\"button game-settings-button\\">Settings</button>\\n        </div>\\n      </div>\\n    </div>");\n    document.querySelector(\'main\').appendChild(newGameModal);\n    renderWinningPlayerIcon(winner);\n  } // Removes the DOM elements for the modal while it\'s currently displayed\n\n\n  function closeNewGameModal() {\n    var newGameModal = document.getElementById(\'modal\');\n    newGameModal ? document.querySelector(\'main\').removeChild(newGameModal) : null;\n  } // Creates the DOM elements for the icon of the winning player to be displayed within the modal\n\n\n  function renderWinningPlayerIcon(winner) {\n    var winningPlayerIcon;\n\n    if (winner === \'draw\') {\n      winningPlayerIcon = "\\n      <span class=\\"fab fa-rebel rebellion-icon\\" aria-hidden=\\"true\\"></span>\\n      <span class=\\"fab fa-empire empire-icon\\" aria-hidden=\\"true\\"></span>";\n    } else {\n      winningPlayerIcon = "<span class=\\"fab fa-".concat(winner === \'Rebellion\' ? \'rebel\' : \'empire\', " ").concat(winner.toLowerCase(), "-icon\\" aria-hidden=\\"true\\"></span>");\n    }\n\n    document.querySelector(\'.winning-player-icon\').innerHTML = winningPlayerIcon;\n  }\n\n  return {\n    openNewGameModal: openNewGameModal,\n    closeNewGameModal: closeNewGameModal\n  };\n}();\n\n\n;// CONCATENATED MODULE: ./src/modules/Game.js\n\n\n\nvar Game = function () {\n  // List of possibilities for a player to win the game\n  var winningCombinations = [[0, 1, 2], [3, 4, 5], [6, 7, 8], [0, 3, 6], [1, 4, 7], [2, 5, 8], [0, 4, 8], [2, 4, 6]]; // The current state of the game board\n\n  var board;\n  var playerOne;\n  var playerTwo;\n  var currentPlayer = null;\n  var aiMoveDelay; // Factory function to create data for a new player for the current game\n\n  var Player = function Player(playerType, playAs) {\n    return {\n      playerType: playerType,\n      playAs: playAs\n    };\n  }; // Creates the DOM elements for the game board\n\n\n  function renderGameBoard(firstPlayer) {\n    document.querySelector(\'.game-container\').innerHTML = "<div class=\\"board-container\\">\\n      <p class=\\"current-turn-message\\">The ".concat(firstPlayer.playAs, " goes first!</p>\\n      <div class=\\"game-board\\">\\n        ").concat(board.map(function (square, index) {\n      return "<div class=\\"square-container\\">\\n            <div class=\\"square fab\\" id=\\"".concat(index, "\\"></div>\\n          </div>");\n    }).join(\'\'), "\\n      </div>\\n      <button type=\\"button\\" class=\\"button restart-button\\">Restart</button>\\n    </div>");\n  } // Resets and renders the game board for a new game\n\n\n  function startNewGame(gameSettingsData) {\n    clearTimeout(aiMoveDelay);\n    board = new Array(9).fill().map(function (square, index) {\n      return index;\n    });\n\n    if (gameSettingsData.players === \'1-player\') {\n      playerOne = Player(\'human\', gameSettingsData.playAs);\n      playerTwo = Player(\'ai\', gameSettingsData.playAs === \'Rebellion\' ? \'Empire\' : \'Rebellion\');\n    } else {\n      playerOne = Player(\'human\', \'Rebellion\');\n      playerTwo = Player(\'human\', \'Empire\');\n    }\n\n    currentPlayer = playerOne;\n    renderGameBoard(currentPlayer);\n    NewGameModal.closeNewGameModal();\n  } // Plays the current player\'s selected square and then changes to the opposing player\'s turn if the game hasn\'t ended\n\n\n  function playTurn(square) {\n    if (typeof board[square] === \'number\') {\n      board[square] = currentPlayer.playAs.toLowerCase();\n      document.getElementById(square).classList.add("fa-".concat(currentPlayer.playAs === \'Rebellion\' ? \'rebel\' : \'empire\'), "".concat(currentPlayer.playAs.toLowerCase(), "-icon"), \'selected\');\n      document.getElementById(square).setAttribute(\'aria-label\', currentPlayer.playAs === \'Rebellion\' ? \'rebel\' : \'empire\');\n\n      if (checkForWinner(currentPlayer)) {\n        highlightWinningSquares(currentPlayer);\n        endGame(currentPlayer.playAs);\n      } else if (checkForDraw()) {\n        endGame(\'draw\');\n      } else {\n        currentPlayer === playerOne ? currentPlayer = playerTwo : currentPlayer = playerOne;\n        document.querySelector(\'.current-turn-message\').innerHTML = "It\'s the ".concat(currentPlayer.playAs, "\'s turn.");\n        if (currentPlayer.playerType === \'ai\') aiMoveDelay = setTimeout(changeToAiTurn, 1200);\n      }\n    }\n  } // Click handler that allows the current player to select a square if it is the user\'s turn\n\n\n  function selectSquare(event) {\n    if (currentPlayer.playerType === \'human\') {\n      playTurn(event.target.id);\n    }\n  } // Determines whether to play the Easy AI or the Hard AI\n\n\n  function changeToAiTurn() {\n    if (GameSettings.returnGameSettingsData().difficulty === \'hard\') {\n      playSmartAiTurn();\n    } else {\n      playRandomAiTurn();\n    }\n  } // AI picks an unplayed square at random (Easy mode)\n\n\n  function playRandomAiTurn() {\n    var availableSquares = checkAvailableSquares();\n    playTurn(availableSquares[Math.floor(Math.random() * availableSquares.length)]);\n  } // AI picks an unplayed square using the minimax algorithm (Hard mode)\n\n\n  function playSmartAiTurn() {\n    playTurn(handleMinimax(board, playerTwo.playAs).index);\n  } // Minimax algorithm which determines the best move the AI should play against the user during its turn\n\n\n  function handleMinimax(boardCopy, player) {\n    var availableSquares = checkAvailableSquares(boardCopy);\n    var bestTestMove = null;\n    var bestScore; // Human player (minimizing player)\n\n    if (checkForWinner(playerOne)) {\n      return {\n        score: -1\n      };\n    } // AI player (maximizing player)\n    else if (checkForWinner(playerTwo)) {\n      return {\n        score: 1\n      };\n    } else if (checkForDraw()) {\n      return {\n        score: 0\n      };\n    } else {\n      // Recursively tests potential move outcomes for the current player\n      var testMoves = availableSquares.reduce(function (acc, square) {\n        var testMove = {};\n        var result;\n        testMove.index = boardCopy[square];\n        boardCopy[square] = player.toLowerCase();\n\n        if (player === playerTwo.playAs) {\n          result = handleMinimax(boardCopy, playerOne.playAs);\n          testMove.score = result.score;\n        } else {\n          result = handleMinimax(boardCopy, playerTwo.playAs);\n          testMove.score = result.score;\n        }\n\n        boardCopy[square] = testMove.index;\n        acc.push(testMove);\n        return acc;\n      }, []); // Uses array of test scores to determine the best move for the AI to play\n\n      if (player === playerTwo.playAs) {\n        bestScore = -Infinity;\n\n        for (var i = 0; i < testMoves.length; i++) {\n          if (testMoves[i].score > bestScore) {\n            bestScore = testMoves[i].score;\n            bestTestMove = i;\n          }\n        }\n      } else {\n        bestScore = Infinity;\n\n        for (var _i = 0; _i < testMoves.length; _i++) {\n          if (testMoves[_i].score < bestScore) {\n            bestScore = testMoves[_i].score;\n            bestTestMove = _i;\n          }\n        }\n      }\n\n      return testMoves[bestTestMove];\n    }\n  } // Checks to see which squares on the board haven\'t been played yet in the current game\n\n\n  function checkAvailableSquares() {\n    return board.filter(function (square) {\n      return typeof square === \'number\';\n    });\n  } // Adds a highlighted background on the winning squares when a player wins\n\n\n  function highlightWinningSquares(player) {\n    var winningSquares = checkForWinner(player);\n    return winningSquares.map(function (square) {\n      document.getElementById(square).classList.add(\'winning-square\');\n    });\n  } // Checks the board to see if the current player has matched one of the possible winning combinations\n\n\n  function checkForWinner(player) {\n    return winningCombinations.find(function (combination) {\n      return combination.every(function (val) {\n        return board[val] === player.playAs.toLowerCase();\n      });\n    });\n  } // Checks the board to see if every square has been filled without a winner\n\n\n  function checkForDraw() {\n    return board.every(function (square) {\n      return typeof square !== \'number\';\n    });\n  } // Ends the current game if a player has won or if there is a draw\n\n\n  function endGame(winner) {\n    var endGameMessage;\n    winner === \'draw\' ? endGameMessage = \'It\\\'s a draw!\' : endGameMessage = "The ".concat(winner, " won!");\n    NewGameModal.openNewGameModal(endGameMessage, winner);\n    document.querySelectorAll(\'.square\').forEach(function (square) {\n      square.classList.add(\'game-ended\');\n    });\n  }\n\n  return {\n    startNewGame: startNewGame,\n    selectSquare: selectSquare\n  };\n}();\n\n\n;// CONCATENATED MODULE: ./src/modules/GameSettings.js\n\n\n\nvar GameSettings = function () {\n  var gameSettingsData; // Factory function to create data for a new settings form submission\n\n  var SettingsFormData = function SettingsFormData(players, difficulty, playAs) {\n    return {\n      players: players,\n      difficulty: difficulty,\n      playAs: playAs\n    };\n  }; // Creates the DOM elements for the game settings form\n\n\n  function renderGameSettings() {\n    document.querySelector(\'.game-container\').innerHTML = "<div class=\\"game-settings-container\\">\\n      <h3>Start a New Game</h3>\\n      <form class=\\"game-settings-form\\" novalidate>\\n        <div class=\\"form-group players\\">\\n          <label for=\\"players-input\\">Players:</label>\\n          <div class=\\"select-wrapper\\">\\n            <select name=\\"players\\" id=\\"players-input\\" required>\\n              <option value=\\"1-player\\" selected>Organic vs. Droid (1-Player)</option>\\n              <option value=\\"2-player\\">Organic vs. Organic (2-Player)</option>\\n            </select>\\n          </div>\\n        </div>\\n        <div class=\\"button-group\\">\\n          <button type=\\"submit\\" class=\\"button start-button\\">Start</button>\\n        </div>\\n      </form>\\n    </div>";\n    toggleOnePlayerSettings(\'1-player\');\n    NewGameModal.closeNewGameModal();\n  } // Shows/Hides the settings options that applies to a 1-player game only\n\n\n  function toggleOnePlayerSettings(players) {\n    var onePlayerSettings;\n\n    if (players === \'1-player\') {\n      onePlayerSettings = document.createElement(\'div\');\n      onePlayerSettings.classList.add(\'one-player-settings\');\n      onePlayerSettings.innerHTML = "\\n      <div class=\\"form-group one-player-setting difficulty\\">\\n        <label for=\\"difficulty-input\\">Difficulty:</label>\\n        <div class=\\"select-wrapper\\">\\n          <select name=\\"difficulty\\" id=\\"difficulty-input\\" required>\\n            <option value=\\"easy\\" selected>Easy</option>\\n            <option value=\\"hard\\">Hard</option>\\n          </select>\\n        </div>\\n      </div>\\n      <div class=\\"form-group one-player-setting play-as\\">\\n        <label for=\\"play-as-input\\">Play as:</label>\\n        <div class=\\"select-wrapper\\">\\n          <select name=\\"play-as\\" id=\\"play-as-input\\" required>\\n            <option value=\\"Rebellion\\" selected>Rebel Alliance</option>\\n            <option value=\\"Empire\\">Galactic Empire</option>\\n          </select>\\n        </div>\\n      </div>";\n      document.querySelector(\'.game-settings-form\').insertBefore(onePlayerSettings, document.querySelector(\'.button-group\'));\n    } else {\n      onePlayerSettings = document.querySelector(\'.game-settings-form .one-player-settings\');\n      onePlayerSettings ? document.querySelector(\'.game-settings-form\').removeChild(onePlayerSettings) : null;\n    }\n  } // Submit handler for the game settings form\n\n\n  function handleSubmit(event, players) {\n    var difficulty = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    var playAs = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n    event.preventDefault();\n    gameSettingsData = SettingsFormData(players, difficulty, playAs);\n    Game.startNewGame(gameSettingsData);\n  } // Returns the values of the current game settings\n\n\n  function returnGameSettingsData() {\n    return gameSettingsData;\n  }\n\n  return {\n    renderGameSettings: renderGameSettings,\n    toggleOnePlayerSettings: toggleOnePlayerSettings,\n    handleSubmit: handleSubmit,\n    returnGameSettingsData: returnGameSettingsData\n  };\n}();\n\n\n;// CONCATENATED MODULE: ./src/modules/App.js\n\n\n\n\nvar App = function () {\n  // Creates the DOM elements for the webpage content\n  function renderApp() {\n    document.getElementById(\'app\').innerHTML = "\\n    <header>\\n      <h1>\\n        <img src=\\"".concat(star_wars_logo, "\\" class=\\"star-wars-logo\\" alt=\\"Star Wars\\" />\\n      </h1>\\n      <h2>Tic-Tac-Toe</h2>\\n    </header>\\n    <main>\\n      <div class=\\"game-container\\"></div>\\n    </main>\\n    <footer>Created by <a href=\\"https://autumnchris.github.io/portfolio\\" target=\\"_blank\\">Autumn Bullard</a> &copy; ").concat(new Date().getFullYear(), "</footer>");\n    GameSettings.renderGameSettings(); // Click Event Listeners\n\n    document.addEventListener(\'click\', function (event) {\n      var element = event.target;\n      element.matches(\'.square\') ? Game.selectSquare(event) : null;\n      element.matches(\'.restart-button\') ? Game.startNewGame(GameSettings.returnGameSettingsData()) : null;\n      element.matches(\'.game-settings-button\') ? GameSettings.renderGameSettings() : null;\n    }); // Change Event Listeners\n\n    document.addEventListener(\'change\', function (event) {\n      var element = event.target;\n      element.matches(\'.game-settings-form #players-input\') ? GameSettings.toggleOnePlayerSettings(element[element.selectedIndex].value) : null;\n    }); // Submit Event Listeners\n\n    document.addEventListener(\'submit\', function (event) {\n      var element = event.target;\n\n      if (element.matches(\'.game-settings-form\')) {\n        element[1].name === \'difficulty\' ? GameSettings.handleSubmit(event, document.getElementById(\'players-input\').value, document.getElementById(\'difficulty-input\').value, document.getElementById(\'play-as-input\').value) : GameSettings.handleSubmit(event, document.getElementById(\'players-input\').value);\n      }\n    });\n  }\n\n  return {\n    renderApp: renderApp\n  };\n}();\n\n\n;// CONCATENATED MODULE: ./node_modules/file-loader/dist/cjs.js?name=[name].[ext]!./src/index.html\n/* harmony default export */ const cjsname_name_ext_src = (__webpack_require__.p + "index.html");\n;// CONCATENATED MODULE: ./node_modules/file-loader/dist/cjs.js?name=[name].[ext]!./src/favicon.ico\n/* harmony default export */ const favicon = (__webpack_require__.p + "favicon.ico");\n;// CONCATENATED MODULE: ./src/index.js\n\n\n\n\n\nApp.renderApp();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzc4LmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ25DQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDNU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUN6REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNuQ0E7O0FDQUE7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGljLXRhYy10b2UtZ2FtZS8uL3NyYy9tb2R1bGVzL05ld0dhbWVNb2RhbC5qcz9jNGU4Iiwid2VicGFjazovL3RpYy10YWMtdG9lLWdhbWUvLi9zcmMvbW9kdWxlcy9HYW1lLmpzPzg5NGMiLCJ3ZWJwYWNrOi8vdGljLXRhYy10b2UtZ2FtZS8uL3NyYy9tb2R1bGVzL0dhbWVTZXR0aW5ncy5qcz9hZWY4Iiwid2VicGFjazovL3RpYy10YWMtdG9lLWdhbWUvLi9zcmMvbW9kdWxlcy9BcHAuanM/ODFhMiIsIndlYnBhY2s6Ly90aWMtdGFjLXRvZS1nYW1lLy4vc3JjL2luZGV4Lmh0bWw/NzNjZiIsIndlYnBhY2s6Ly90aWMtdGFjLXRvZS1nYW1lLy4vc3JjL2Zhdmljb24uaWNvP2FlNzAiLCJ3ZWJwYWNrOi8vdGljLXRhYy10b2UtZ2FtZS8uL3NyYy9pbmRleC5qcz9kOWJlIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBOZXdHYW1lTW9kYWwgPSBmdW5jdGlvbiAoKSB7XG4gIC8vIENyZWF0ZXMgdGhlIERPTSBlbGVtZW50cyBmb3IgYSBtb2RhbCB0aGF0IHRlbGxzIHRoZSB1c2VyIHdobyB3b24gYW5kIHRvIGFsbG93IHRoZW0gdG8gc3RhcnQgYSBuZXcgZ2FtZVxuICBmdW5jdGlvbiBvcGVuTmV3R2FtZU1vZGFsKGVuZEdhbWVNZXNzYWdlLCB3aW5uZXIpIHtcbiAgICB2YXIgbmV3R2FtZU1vZGFsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgbmV3R2FtZU1vZGFsLmNsYXNzTGlzdC5hZGQoJ21vZGFsJyk7XG4gICAgbmV3R2FtZU1vZGFsLnNldEF0dHJpYnV0ZSgnaWQnLCAnbW9kYWwnKTtcbiAgICBuZXdHYW1lTW9kYWwuaW5uZXJIVE1MID0gXCI8ZGl2IGNsYXNzPVxcXCJtb2RhbC1jb250ZW50XFxcIj5cXG4gICAgICA8ZGl2IGNsYXNzPVxcXCJtb2RhbC1ib2R5XFxcIj5cXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcIndpbm5pbmctcGxheWVyLWljb25cXFwiPjwvZGl2PlxcbiAgICAgICAgPHA+XCIuY29uY2F0KGVuZEdhbWVNZXNzYWdlLCBcIjwvcD5cXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImJ1dHRvbi1ncm91cFxcXCI+XFxuICAgICAgICAgIDxidXR0b24gdHlwZT1cXFwiYnV0dG9uXFxcIiBjbGFzcz1cXFwiYnV0dG9uIHJlc3RhcnQtYnV0dG9uXFxcIj5QbGF5IEFnYWluPC9idXR0b24+XFxuICAgICAgICAgIDxidXR0b24gdHlwZT1cXFwiYnV0dG9uXFxcIiBjbGFzcz1cXFwiYnV0dG9uIGdhbWUtc2V0dGluZ3MtYnV0dG9uXFxcIj5TZXR0aW5nczwvYnV0dG9uPlxcbiAgICAgICAgPC9kaXY+XFxuICAgICAgPC9kaXY+XFxuICAgIDwvZGl2PlwiKTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtYWluJykuYXBwZW5kQ2hpbGQobmV3R2FtZU1vZGFsKTtcbiAgICByZW5kZXJXaW5uaW5nUGxheWVySWNvbih3aW5uZXIpO1xuICB9IC8vIFJlbW92ZXMgdGhlIERPTSBlbGVtZW50cyBmb3IgdGhlIG1vZGFsIHdoaWxlIGl0J3MgY3VycmVudGx5IGRpc3BsYXllZFxuXG5cbiAgZnVuY3Rpb24gY2xvc2VOZXdHYW1lTW9kYWwoKSB7XG4gICAgdmFyIG5ld0dhbWVNb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2RhbCcpO1xuICAgIG5ld0dhbWVNb2RhbCA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ21haW4nKS5yZW1vdmVDaGlsZChuZXdHYW1lTW9kYWwpIDogbnVsbDtcbiAgfSAvLyBDcmVhdGVzIHRoZSBET00gZWxlbWVudHMgZm9yIHRoZSBpY29uIG9mIHRoZSB3aW5uaW5nIHBsYXllciB0byBiZSBkaXNwbGF5ZWQgd2l0aGluIHRoZSBtb2RhbFxuXG5cbiAgZnVuY3Rpb24gcmVuZGVyV2lubmluZ1BsYXllckljb24od2lubmVyKSB7XG4gICAgdmFyIHdpbm5pbmdQbGF5ZXJJY29uO1xuXG4gICAgaWYgKHdpbm5lciA9PT0gJ2RyYXcnKSB7XG4gICAgICB3aW5uaW5nUGxheWVySWNvbiA9IFwiXFxuICAgICAgPHNwYW4gY2xhc3M9XFxcImZhYiBmYS1yZWJlbCByZWJlbGxpb24taWNvblxcXCIgYXJpYS1oaWRkZW49XFxcInRydWVcXFwiPjwvc3Bhbj5cXG4gICAgICA8c3BhbiBjbGFzcz1cXFwiZmFiIGZhLWVtcGlyZSBlbXBpcmUtaWNvblxcXCIgYXJpYS1oaWRkZW49XFxcInRydWVcXFwiPjwvc3Bhbj5cIjtcbiAgICB9IGVsc2Uge1xuICAgICAgd2lubmluZ1BsYXllckljb24gPSBcIjxzcGFuIGNsYXNzPVxcXCJmYWIgZmEtXCIuY29uY2F0KHdpbm5lciA9PT0gJ1JlYmVsbGlvbicgPyAncmViZWwnIDogJ2VtcGlyZScsIFwiIFwiKS5jb25jYXQod2lubmVyLnRvTG93ZXJDYXNlKCksIFwiLWljb25cXFwiIGFyaWEtaGlkZGVuPVxcXCJ0cnVlXFxcIj48L3NwYW4+XCIpO1xuICAgIH1cblxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53aW5uaW5nLXBsYXllci1pY29uJykuaW5uZXJIVE1MID0gd2lubmluZ1BsYXllckljb247XG4gIH1cblxuICByZXR1cm4ge1xuICAgIG9wZW5OZXdHYW1lTW9kYWw6IG9wZW5OZXdHYW1lTW9kYWwsXG4gICAgY2xvc2VOZXdHYW1lTW9kYWw6IGNsb3NlTmV3R2FtZU1vZGFsXG4gIH07XG59KCk7XG5cbmV4cG9ydCB7IE5ld0dhbWVNb2RhbCB9OyIsImltcG9ydCB7IEdhbWVTZXR0aW5ncyB9IGZyb20gJy4vR2FtZVNldHRpbmdzJztcbmltcG9ydCB7IE5ld0dhbWVNb2RhbCB9IGZyb20gJy4vTmV3R2FtZU1vZGFsJztcblxudmFyIEdhbWUgPSBmdW5jdGlvbiAoKSB7XG4gIC8vIExpc3Qgb2YgcG9zc2liaWxpdGllcyBmb3IgYSBwbGF5ZXIgdG8gd2luIHRoZSBnYW1lXG4gIHZhciB3aW5uaW5nQ29tYmluYXRpb25zID0gW1swLCAxLCAyXSwgWzMsIDQsIDVdLCBbNiwgNywgOF0sIFswLCAzLCA2XSwgWzEsIDQsIDddLCBbMiwgNSwgOF0sIFswLCA0LCA4XSwgWzIsIDQsIDZdXTsgLy8gVGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIGdhbWUgYm9hcmRcblxuICB2YXIgYm9hcmQ7XG4gIHZhciBwbGF5ZXJPbmU7XG4gIHZhciBwbGF5ZXJUd287XG4gIHZhciBjdXJyZW50UGxheWVyID0gbnVsbDtcbiAgdmFyIGFpTW92ZURlbGF5OyAvLyBGYWN0b3J5IGZ1bmN0aW9uIHRvIGNyZWF0ZSBkYXRhIGZvciBhIG5ldyBwbGF5ZXIgZm9yIHRoZSBjdXJyZW50IGdhbWVcblxuICB2YXIgUGxheWVyID0gZnVuY3Rpb24gUGxheWVyKHBsYXllclR5cGUsIHBsYXlBcykge1xuICAgIHJldHVybiB7XG4gICAgICBwbGF5ZXJUeXBlOiBwbGF5ZXJUeXBlLFxuICAgICAgcGxheUFzOiBwbGF5QXNcbiAgICB9O1xuICB9OyAvLyBDcmVhdGVzIHRoZSBET00gZWxlbWVudHMgZm9yIHRoZSBnYW1lIGJvYXJkXG5cblxuICBmdW5jdGlvbiByZW5kZXJHYW1lQm9hcmQoZmlyc3RQbGF5ZXIpIHtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ2FtZS1jb250YWluZXInKS5pbm5lckhUTUwgPSBcIjxkaXYgY2xhc3M9XFxcImJvYXJkLWNvbnRhaW5lclxcXCI+XFxuICAgICAgPHAgY2xhc3M9XFxcImN1cnJlbnQtdHVybi1tZXNzYWdlXFxcIj5UaGUgXCIuY29uY2F0KGZpcnN0UGxheWVyLnBsYXlBcywgXCIgZ29lcyBmaXJzdCE8L3A+XFxuICAgICAgPGRpdiBjbGFzcz1cXFwiZ2FtZS1ib2FyZFxcXCI+XFxuICAgICAgICBcIikuY29uY2F0KGJvYXJkLm1hcChmdW5jdGlvbiAoc3F1YXJlLCBpbmRleCkge1xuICAgICAgcmV0dXJuIFwiPGRpdiBjbGFzcz1cXFwic3F1YXJlLWNvbnRhaW5lclxcXCI+XFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwic3F1YXJlIGZhYlxcXCIgaWQ9XFxcIlwiLmNvbmNhdChpbmRleCwgXCJcXFwiPjwvZGl2PlxcbiAgICAgICAgICA8L2Rpdj5cIik7XG4gICAgfSkuam9pbignJyksIFwiXFxuICAgICAgPC9kaXY+XFxuICAgICAgPGJ1dHRvbiB0eXBlPVxcXCJidXR0b25cXFwiIGNsYXNzPVxcXCJidXR0b24gcmVzdGFydC1idXR0b25cXFwiPlJlc3RhcnQ8L2J1dHRvbj5cXG4gICAgPC9kaXY+XCIpO1xuICB9IC8vIFJlc2V0cyBhbmQgcmVuZGVycyB0aGUgZ2FtZSBib2FyZCBmb3IgYSBuZXcgZ2FtZVxuXG5cbiAgZnVuY3Rpb24gc3RhcnROZXdHYW1lKGdhbWVTZXR0aW5nc0RhdGEpIHtcbiAgICBjbGVhclRpbWVvdXQoYWlNb3ZlRGVsYXkpO1xuICAgIGJvYXJkID0gbmV3IEFycmF5KDkpLmZpbGwoKS5tYXAoZnVuY3Rpb24gKHNxdWFyZSwgaW5kZXgpIHtcbiAgICAgIHJldHVybiBpbmRleDtcbiAgICB9KTtcblxuICAgIGlmIChnYW1lU2V0dGluZ3NEYXRhLnBsYXllcnMgPT09ICcxLXBsYXllcicpIHtcbiAgICAgIHBsYXllck9uZSA9IFBsYXllcignaHVtYW4nLCBnYW1lU2V0dGluZ3NEYXRhLnBsYXlBcyk7XG4gICAgICBwbGF5ZXJUd28gPSBQbGF5ZXIoJ2FpJywgZ2FtZVNldHRpbmdzRGF0YS5wbGF5QXMgPT09ICdSZWJlbGxpb24nID8gJ0VtcGlyZScgOiAnUmViZWxsaW9uJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBsYXllck9uZSA9IFBsYXllcignaHVtYW4nLCAnUmViZWxsaW9uJyk7XG4gICAgICBwbGF5ZXJUd28gPSBQbGF5ZXIoJ2h1bWFuJywgJ0VtcGlyZScpO1xuICAgIH1cblxuICAgIGN1cnJlbnRQbGF5ZXIgPSBwbGF5ZXJPbmU7XG4gICAgcmVuZGVyR2FtZUJvYXJkKGN1cnJlbnRQbGF5ZXIpO1xuICAgIE5ld0dhbWVNb2RhbC5jbG9zZU5ld0dhbWVNb2RhbCgpO1xuICB9IC8vIFBsYXlzIHRoZSBjdXJyZW50IHBsYXllcidzIHNlbGVjdGVkIHNxdWFyZSBhbmQgdGhlbiBjaGFuZ2VzIHRvIHRoZSBvcHBvc2luZyBwbGF5ZXIncyB0dXJuIGlmIHRoZSBnYW1lIGhhc24ndCBlbmRlZFxuXG5cbiAgZnVuY3Rpb24gcGxheVR1cm4oc3F1YXJlKSB7XG4gICAgaWYgKHR5cGVvZiBib2FyZFtzcXVhcmVdID09PSAnbnVtYmVyJykge1xuICAgICAgYm9hcmRbc3F1YXJlXSA9IGN1cnJlbnRQbGF5ZXIucGxheUFzLnRvTG93ZXJDYXNlKCk7XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzcXVhcmUpLmNsYXNzTGlzdC5hZGQoXCJmYS1cIi5jb25jYXQoY3VycmVudFBsYXllci5wbGF5QXMgPT09ICdSZWJlbGxpb24nID8gJ3JlYmVsJyA6ICdlbXBpcmUnKSwgXCJcIi5jb25jYXQoY3VycmVudFBsYXllci5wbGF5QXMudG9Mb3dlckNhc2UoKSwgXCItaWNvblwiKSwgJ3NlbGVjdGVkJyk7XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzcXVhcmUpLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIGN1cnJlbnRQbGF5ZXIucGxheUFzID09PSAnUmViZWxsaW9uJyA/ICdyZWJlbCcgOiAnZW1waXJlJyk7XG5cbiAgICAgIGlmIChjaGVja0Zvcldpbm5lcihjdXJyZW50UGxheWVyKSkge1xuICAgICAgICBoaWdobGlnaHRXaW5uaW5nU3F1YXJlcyhjdXJyZW50UGxheWVyKTtcbiAgICAgICAgZW5kR2FtZShjdXJyZW50UGxheWVyLnBsYXlBcyk7XG4gICAgICB9IGVsc2UgaWYgKGNoZWNrRm9yRHJhdygpKSB7XG4gICAgICAgIGVuZEdhbWUoJ2RyYXcnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGN1cnJlbnRQbGF5ZXIgPT09IHBsYXllck9uZSA/IGN1cnJlbnRQbGF5ZXIgPSBwbGF5ZXJUd28gOiBjdXJyZW50UGxheWVyID0gcGxheWVyT25lO1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY3VycmVudC10dXJuLW1lc3NhZ2UnKS5pbm5lckhUTUwgPSBcIkl0J3MgdGhlIFwiLmNvbmNhdChjdXJyZW50UGxheWVyLnBsYXlBcywgXCIncyB0dXJuLlwiKTtcbiAgICAgICAgaWYgKGN1cnJlbnRQbGF5ZXIucGxheWVyVHlwZSA9PT0gJ2FpJykgYWlNb3ZlRGVsYXkgPSBzZXRUaW1lb3V0KGNoYW5nZVRvQWlUdXJuLCAxMjAwKTtcbiAgICAgIH1cbiAgICB9XG4gIH0gLy8gQ2xpY2sgaGFuZGxlciB0aGF0IGFsbG93cyB0aGUgY3VycmVudCBwbGF5ZXIgdG8gc2VsZWN0IGEgc3F1YXJlIGlmIGl0IGlzIHRoZSB1c2VyJ3MgdHVyblxuXG5cbiAgZnVuY3Rpb24gc2VsZWN0U3F1YXJlKGV2ZW50KSB7XG4gICAgaWYgKGN1cnJlbnRQbGF5ZXIucGxheWVyVHlwZSA9PT0gJ2h1bWFuJykge1xuICAgICAgcGxheVR1cm4oZXZlbnQudGFyZ2V0LmlkKTtcbiAgICB9XG4gIH0gLy8gRGV0ZXJtaW5lcyB3aGV0aGVyIHRvIHBsYXkgdGhlIEVhc3kgQUkgb3IgdGhlIEhhcmQgQUlcblxuXG4gIGZ1bmN0aW9uIGNoYW5nZVRvQWlUdXJuKCkge1xuICAgIGlmIChHYW1lU2V0dGluZ3MucmV0dXJuR2FtZVNldHRpbmdzRGF0YSgpLmRpZmZpY3VsdHkgPT09ICdoYXJkJykge1xuICAgICAgcGxheVNtYXJ0QWlUdXJuKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBsYXlSYW5kb21BaVR1cm4oKTtcbiAgICB9XG4gIH0gLy8gQUkgcGlja3MgYW4gdW5wbGF5ZWQgc3F1YXJlIGF0IHJhbmRvbSAoRWFzeSBtb2RlKVxuXG5cbiAgZnVuY3Rpb24gcGxheVJhbmRvbUFpVHVybigpIHtcbiAgICB2YXIgYXZhaWxhYmxlU3F1YXJlcyA9IGNoZWNrQXZhaWxhYmxlU3F1YXJlcygpO1xuICAgIHBsYXlUdXJuKGF2YWlsYWJsZVNxdWFyZXNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogYXZhaWxhYmxlU3F1YXJlcy5sZW5ndGgpXSk7XG4gIH0gLy8gQUkgcGlja3MgYW4gdW5wbGF5ZWQgc3F1YXJlIHVzaW5nIHRoZSBtaW5pbWF4IGFsZ29yaXRobSAoSGFyZCBtb2RlKVxuXG5cbiAgZnVuY3Rpb24gcGxheVNtYXJ0QWlUdXJuKCkge1xuICAgIHBsYXlUdXJuKGhhbmRsZU1pbmltYXgoYm9hcmQsIHBsYXllclR3by5wbGF5QXMpLmluZGV4KTtcbiAgfSAvLyBNaW5pbWF4IGFsZ29yaXRobSB3aGljaCBkZXRlcm1pbmVzIHRoZSBiZXN0IG1vdmUgdGhlIEFJIHNob3VsZCBwbGF5IGFnYWluc3QgdGhlIHVzZXIgZHVyaW5nIGl0cyB0dXJuXG5cblxuICBmdW5jdGlvbiBoYW5kbGVNaW5pbWF4KGJvYXJkQ29weSwgcGxheWVyKSB7XG4gICAgdmFyIGF2YWlsYWJsZVNxdWFyZXMgPSBjaGVja0F2YWlsYWJsZVNxdWFyZXMoYm9hcmRDb3B5KTtcbiAgICB2YXIgYmVzdFRlc3RNb3ZlID0gbnVsbDtcbiAgICB2YXIgYmVzdFNjb3JlOyAvLyBIdW1hbiBwbGF5ZXIgKG1pbmltaXppbmcgcGxheWVyKVxuXG4gICAgaWYgKGNoZWNrRm9yV2lubmVyKHBsYXllck9uZSkpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHNjb3JlOiAtMVxuICAgICAgfTtcbiAgICB9IC8vIEFJIHBsYXllciAobWF4aW1pemluZyBwbGF5ZXIpXG4gICAgZWxzZSBpZiAoY2hlY2tGb3JXaW5uZXIocGxheWVyVHdvKSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc2NvcmU6IDFcbiAgICAgIH07XG4gICAgfSBlbHNlIGlmIChjaGVja0ZvckRyYXcoKSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc2NvcmU6IDBcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFJlY3Vyc2l2ZWx5IHRlc3RzIHBvdGVudGlhbCBtb3ZlIG91dGNvbWVzIGZvciB0aGUgY3VycmVudCBwbGF5ZXJcbiAgICAgIHZhciB0ZXN0TW92ZXMgPSBhdmFpbGFibGVTcXVhcmVzLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBzcXVhcmUpIHtcbiAgICAgICAgdmFyIHRlc3RNb3ZlID0ge307XG4gICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgIHRlc3RNb3ZlLmluZGV4ID0gYm9hcmRDb3B5W3NxdWFyZV07XG4gICAgICAgIGJvYXJkQ29weVtzcXVhcmVdID0gcGxheWVyLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgICAgaWYgKHBsYXllciA9PT0gcGxheWVyVHdvLnBsYXlBcykge1xuICAgICAgICAgIHJlc3VsdCA9IGhhbmRsZU1pbmltYXgoYm9hcmRDb3B5LCBwbGF5ZXJPbmUucGxheUFzKTtcbiAgICAgICAgICB0ZXN0TW92ZS5zY29yZSA9IHJlc3VsdC5zY29yZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXN1bHQgPSBoYW5kbGVNaW5pbWF4KGJvYXJkQ29weSwgcGxheWVyVHdvLnBsYXlBcyk7XG4gICAgICAgICAgdGVzdE1vdmUuc2NvcmUgPSByZXN1bHQuc2NvcmU7XG4gICAgICAgIH1cblxuICAgICAgICBib2FyZENvcHlbc3F1YXJlXSA9IHRlc3RNb3ZlLmluZGV4O1xuICAgICAgICBhY2MucHVzaCh0ZXN0TW92ZSk7XG4gICAgICAgIHJldHVybiBhY2M7XG4gICAgICB9LCBbXSk7IC8vIFVzZXMgYXJyYXkgb2YgdGVzdCBzY29yZXMgdG8gZGV0ZXJtaW5lIHRoZSBiZXN0IG1vdmUgZm9yIHRoZSBBSSB0byBwbGF5XG5cbiAgICAgIGlmIChwbGF5ZXIgPT09IHBsYXllclR3by5wbGF5QXMpIHtcbiAgICAgICAgYmVzdFNjb3JlID0gLUluZmluaXR5O1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGVzdE1vdmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKHRlc3RNb3Zlc1tpXS5zY29yZSA+IGJlc3RTY29yZSkge1xuICAgICAgICAgICAgYmVzdFNjb3JlID0gdGVzdE1vdmVzW2ldLnNjb3JlO1xuICAgICAgICAgICAgYmVzdFRlc3RNb3ZlID0gaTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJlc3RTY29yZSA9IEluZmluaXR5O1xuXG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCB0ZXN0TW92ZXMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgaWYgKHRlc3RNb3Zlc1tfaV0uc2NvcmUgPCBiZXN0U2NvcmUpIHtcbiAgICAgICAgICAgIGJlc3RTY29yZSA9IHRlc3RNb3Zlc1tfaV0uc2NvcmU7XG4gICAgICAgICAgICBiZXN0VGVzdE1vdmUgPSBfaTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRlc3RNb3Zlc1tiZXN0VGVzdE1vdmVdO1xuICAgIH1cbiAgfSAvLyBDaGVja3MgdG8gc2VlIHdoaWNoIHNxdWFyZXMgb24gdGhlIGJvYXJkIGhhdmVuJ3QgYmVlbiBwbGF5ZWQgeWV0IGluIHRoZSBjdXJyZW50IGdhbWVcblxuXG4gIGZ1bmN0aW9uIGNoZWNrQXZhaWxhYmxlU3F1YXJlcygpIHtcbiAgICByZXR1cm4gYm9hcmQuZmlsdGVyKGZ1bmN0aW9uIChzcXVhcmUpIHtcbiAgICAgIHJldHVybiB0eXBlb2Ygc3F1YXJlID09PSAnbnVtYmVyJztcbiAgICB9KTtcbiAgfSAvLyBBZGRzIGEgaGlnaGxpZ2h0ZWQgYmFja2dyb3VuZCBvbiB0aGUgd2lubmluZyBzcXVhcmVzIHdoZW4gYSBwbGF5ZXIgd2luc1xuXG5cbiAgZnVuY3Rpb24gaGlnaGxpZ2h0V2lubmluZ1NxdWFyZXMocGxheWVyKSB7XG4gICAgdmFyIHdpbm5pbmdTcXVhcmVzID0gY2hlY2tGb3JXaW5uZXIocGxheWVyKTtcbiAgICByZXR1cm4gd2lubmluZ1NxdWFyZXMubWFwKGZ1bmN0aW9uIChzcXVhcmUpIHtcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHNxdWFyZSkuY2xhc3NMaXN0LmFkZCgnd2lubmluZy1zcXVhcmUnKTtcbiAgICB9KTtcbiAgfSAvLyBDaGVja3MgdGhlIGJvYXJkIHRvIHNlZSBpZiB0aGUgY3VycmVudCBwbGF5ZXIgaGFzIG1hdGNoZWQgb25lIG9mIHRoZSBwb3NzaWJsZSB3aW5uaW5nIGNvbWJpbmF0aW9uc1xuXG5cbiAgZnVuY3Rpb24gY2hlY2tGb3JXaW5uZXIocGxheWVyKSB7XG4gICAgcmV0dXJuIHdpbm5pbmdDb21iaW5hdGlvbnMuZmluZChmdW5jdGlvbiAoY29tYmluYXRpb24pIHtcbiAgICAgIHJldHVybiBjb21iaW5hdGlvbi5ldmVyeShmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgIHJldHVybiBib2FyZFt2YWxdID09PSBwbGF5ZXIucGxheUFzLnRvTG93ZXJDYXNlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSAvLyBDaGVja3MgdGhlIGJvYXJkIHRvIHNlZSBpZiBldmVyeSBzcXVhcmUgaGFzIGJlZW4gZmlsbGVkIHdpdGhvdXQgYSB3aW5uZXJcblxuXG4gIGZ1bmN0aW9uIGNoZWNrRm9yRHJhdygpIHtcbiAgICByZXR1cm4gYm9hcmQuZXZlcnkoZnVuY3Rpb24gKHNxdWFyZSkge1xuICAgICAgcmV0dXJuIHR5cGVvZiBzcXVhcmUgIT09ICdudW1iZXInO1xuICAgIH0pO1xuICB9IC8vIEVuZHMgdGhlIGN1cnJlbnQgZ2FtZSBpZiBhIHBsYXllciBoYXMgd29uIG9yIGlmIHRoZXJlIGlzIGEgZHJhd1xuXG5cbiAgZnVuY3Rpb24gZW5kR2FtZSh3aW5uZXIpIHtcbiAgICB2YXIgZW5kR2FtZU1lc3NhZ2U7XG4gICAgd2lubmVyID09PSAnZHJhdycgPyBlbmRHYW1lTWVzc2FnZSA9ICdJdFxcJ3MgYSBkcmF3IScgOiBlbmRHYW1lTWVzc2FnZSA9IFwiVGhlIFwiLmNvbmNhdCh3aW5uZXIsIFwiIHdvbiFcIik7XG4gICAgTmV3R2FtZU1vZGFsLm9wZW5OZXdHYW1lTW9kYWwoZW5kR2FtZU1lc3NhZ2UsIHdpbm5lcik7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNxdWFyZScpLmZvckVhY2goZnVuY3Rpb24gKHNxdWFyZSkge1xuICAgICAgc3F1YXJlLmNsYXNzTGlzdC5hZGQoJ2dhbWUtZW5kZWQnKTtcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgc3RhcnROZXdHYW1lOiBzdGFydE5ld0dhbWUsXG4gICAgc2VsZWN0U3F1YXJlOiBzZWxlY3RTcXVhcmVcbiAgfTtcbn0oKTtcblxuZXhwb3J0IHsgR2FtZSB9OyIsImltcG9ydCB7IEdhbWUgfSBmcm9tIFwiLi9HYW1lXCI7XG5pbXBvcnQgeyBOZXdHYW1lTW9kYWwgfSBmcm9tIFwiLi9OZXdHYW1lTW9kYWxcIjtcblxudmFyIEdhbWVTZXR0aW5ncyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGdhbWVTZXR0aW5nc0RhdGE7IC8vIEZhY3RvcnkgZnVuY3Rpb24gdG8gY3JlYXRlIGRhdGEgZm9yIGEgbmV3IHNldHRpbmdzIGZvcm0gc3VibWlzc2lvblxuXG4gIHZhciBTZXR0aW5nc0Zvcm1EYXRhID0gZnVuY3Rpb24gU2V0dGluZ3NGb3JtRGF0YShwbGF5ZXJzLCBkaWZmaWN1bHR5LCBwbGF5QXMpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcGxheWVyczogcGxheWVycyxcbiAgICAgIGRpZmZpY3VsdHk6IGRpZmZpY3VsdHksXG4gICAgICBwbGF5QXM6IHBsYXlBc1xuICAgIH07XG4gIH07IC8vIENyZWF0ZXMgdGhlIERPTSBlbGVtZW50cyBmb3IgdGhlIGdhbWUgc2V0dGluZ3MgZm9ybVxuXG5cbiAgZnVuY3Rpb24gcmVuZGVyR2FtZVNldHRpbmdzKCkge1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nYW1lLWNvbnRhaW5lcicpLmlubmVySFRNTCA9IFwiPGRpdiBjbGFzcz1cXFwiZ2FtZS1zZXR0aW5ncy1jb250YWluZXJcXFwiPlxcbiAgICAgIDxoMz5TdGFydCBhIE5ldyBHYW1lPC9oMz5cXG4gICAgICA8Zm9ybSBjbGFzcz1cXFwiZ2FtZS1zZXR0aW5ncy1mb3JtXFxcIiBub3ZhbGlkYXRlPlxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiZm9ybS1ncm91cCBwbGF5ZXJzXFxcIj5cXG4gICAgICAgICAgPGxhYmVsIGZvcj1cXFwicGxheWVycy1pbnB1dFxcXCI+UGxheWVyczo8L2xhYmVsPlxcbiAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJzZWxlY3Qtd3JhcHBlclxcXCI+XFxuICAgICAgICAgICAgPHNlbGVjdCBuYW1lPVxcXCJwbGF5ZXJzXFxcIiBpZD1cXFwicGxheWVycy1pbnB1dFxcXCIgcmVxdWlyZWQ+XFxuICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVxcXCIxLXBsYXllclxcXCIgc2VsZWN0ZWQ+T3JnYW5pYyB2cy4gRHJvaWQgKDEtUGxheWVyKTwvb3B0aW9uPlxcbiAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cXFwiMi1wbGF5ZXJcXFwiPk9yZ2FuaWMgdnMuIE9yZ2FuaWMgKDItUGxheWVyKTwvb3B0aW9uPlxcbiAgICAgICAgICAgIDwvc2VsZWN0PlxcbiAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgIDwvZGl2PlxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiYnV0dG9uLWdyb3VwXFxcIj5cXG4gICAgICAgICAgPGJ1dHRvbiB0eXBlPVxcXCJzdWJtaXRcXFwiIGNsYXNzPVxcXCJidXR0b24gc3RhcnQtYnV0dG9uXFxcIj5TdGFydDwvYnV0dG9uPlxcbiAgICAgICAgPC9kaXY+XFxuICAgICAgPC9mb3JtPlxcbiAgICA8L2Rpdj5cIjtcbiAgICB0b2dnbGVPbmVQbGF5ZXJTZXR0aW5ncygnMS1wbGF5ZXInKTtcbiAgICBOZXdHYW1lTW9kYWwuY2xvc2VOZXdHYW1lTW9kYWwoKTtcbiAgfSAvLyBTaG93cy9IaWRlcyB0aGUgc2V0dGluZ3Mgb3B0aW9ucyB0aGF0IGFwcGxpZXMgdG8gYSAxLXBsYXllciBnYW1lIG9ubHlcblxuXG4gIGZ1bmN0aW9uIHRvZ2dsZU9uZVBsYXllclNldHRpbmdzKHBsYXllcnMpIHtcbiAgICB2YXIgb25lUGxheWVyU2V0dGluZ3M7XG5cbiAgICBpZiAocGxheWVycyA9PT0gJzEtcGxheWVyJykge1xuICAgICAgb25lUGxheWVyU2V0dGluZ3MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIG9uZVBsYXllclNldHRpbmdzLmNsYXNzTGlzdC5hZGQoJ29uZS1wbGF5ZXItc2V0dGluZ3MnKTtcbiAgICAgIG9uZVBsYXllclNldHRpbmdzLmlubmVySFRNTCA9IFwiXFxuICAgICAgPGRpdiBjbGFzcz1cXFwiZm9ybS1ncm91cCBvbmUtcGxheWVyLXNldHRpbmcgZGlmZmljdWx0eVxcXCI+XFxuICAgICAgICA8bGFiZWwgZm9yPVxcXCJkaWZmaWN1bHR5LWlucHV0XFxcIj5EaWZmaWN1bHR5OjwvbGFiZWw+XFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJzZWxlY3Qtd3JhcHBlclxcXCI+XFxuICAgICAgICAgIDxzZWxlY3QgbmFtZT1cXFwiZGlmZmljdWx0eVxcXCIgaWQ9XFxcImRpZmZpY3VsdHktaW5wdXRcXFwiIHJlcXVpcmVkPlxcbiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XFxcImVhc3lcXFwiIHNlbGVjdGVkPkVhc3k8L29wdGlvbj5cXG4gICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVxcXCJoYXJkXFxcIj5IYXJkPC9vcHRpb24+XFxuICAgICAgICAgIDwvc2VsZWN0PlxcbiAgICAgICAgPC9kaXY+XFxuICAgICAgPC9kaXY+XFxuICAgICAgPGRpdiBjbGFzcz1cXFwiZm9ybS1ncm91cCBvbmUtcGxheWVyLXNldHRpbmcgcGxheS1hc1xcXCI+XFxuICAgICAgICA8bGFiZWwgZm9yPVxcXCJwbGF5LWFzLWlucHV0XFxcIj5QbGF5IGFzOjwvbGFiZWw+XFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJzZWxlY3Qtd3JhcHBlclxcXCI+XFxuICAgICAgICAgIDxzZWxlY3QgbmFtZT1cXFwicGxheS1hc1xcXCIgaWQ9XFxcInBsYXktYXMtaW5wdXRcXFwiIHJlcXVpcmVkPlxcbiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XFxcIlJlYmVsbGlvblxcXCIgc2VsZWN0ZWQ+UmViZWwgQWxsaWFuY2U8L29wdGlvbj5cXG4gICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVxcXCJFbXBpcmVcXFwiPkdhbGFjdGljIEVtcGlyZTwvb3B0aW9uPlxcbiAgICAgICAgICA8L3NlbGVjdD5cXG4gICAgICAgIDwvZGl2PlxcbiAgICAgIDwvZGl2PlwiO1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmdhbWUtc2V0dGluZ3MtZm9ybScpLmluc2VydEJlZm9yZShvbmVQbGF5ZXJTZXR0aW5ncywgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1dHRvbi1ncm91cCcpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgb25lUGxheWVyU2V0dGluZ3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ2FtZS1zZXR0aW5ncy1mb3JtIC5vbmUtcGxheWVyLXNldHRpbmdzJyk7XG4gICAgICBvbmVQbGF5ZXJTZXR0aW5ncyA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nYW1lLXNldHRpbmdzLWZvcm0nKS5yZW1vdmVDaGlsZChvbmVQbGF5ZXJTZXR0aW5ncykgOiBudWxsO1xuICAgIH1cbiAgfSAvLyBTdWJtaXQgaGFuZGxlciBmb3IgdGhlIGdhbWUgc2V0dGluZ3MgZm9ybVxuXG5cbiAgZnVuY3Rpb24gaGFuZGxlU3VibWl0KGV2ZW50LCBwbGF5ZXJzKSB7XG4gICAgdmFyIGRpZmZpY3VsdHkgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IG51bGw7XG4gICAgdmFyIHBsYXlBcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogbnVsbDtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGdhbWVTZXR0aW5nc0RhdGEgPSBTZXR0aW5nc0Zvcm1EYXRhKHBsYXllcnMsIGRpZmZpY3VsdHksIHBsYXlBcyk7XG4gICAgR2FtZS5zdGFydE5ld0dhbWUoZ2FtZVNldHRpbmdzRGF0YSk7XG4gIH0gLy8gUmV0dXJucyB0aGUgdmFsdWVzIG9mIHRoZSBjdXJyZW50IGdhbWUgc2V0dGluZ3NcblxuXG4gIGZ1bmN0aW9uIHJldHVybkdhbWVTZXR0aW5nc0RhdGEoKSB7XG4gICAgcmV0dXJuIGdhbWVTZXR0aW5nc0RhdGE7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHJlbmRlckdhbWVTZXR0aW5nczogcmVuZGVyR2FtZVNldHRpbmdzLFxuICAgIHRvZ2dsZU9uZVBsYXllclNldHRpbmdzOiB0b2dnbGVPbmVQbGF5ZXJTZXR0aW5ncyxcbiAgICBoYW5kbGVTdWJtaXQ6IGhhbmRsZVN1Ym1pdCxcbiAgICByZXR1cm5HYW1lU2V0dGluZ3NEYXRhOiByZXR1cm5HYW1lU2V0dGluZ3NEYXRhXG4gIH07XG59KCk7XG5cbmV4cG9ydCB7IEdhbWVTZXR0aW5ncyB9OyIsImltcG9ydCBzdGFyV2Fyc0xvZ28gZnJvbSAnLi4vaW1hZ2VzL3N0YXItd2Fycy1sb2dvLnBuZyc7XG5pbXBvcnQgeyBHYW1lU2V0dGluZ3MgfSBmcm9tICcuL0dhbWVTZXR0aW5ncyc7XG5pbXBvcnQgeyBHYW1lIH0gZnJvbSAnLi9HYW1lJztcblxudmFyIEFwcCA9IGZ1bmN0aW9uICgpIHtcbiAgLy8gQ3JlYXRlcyB0aGUgRE9NIGVsZW1lbnRzIGZvciB0aGUgd2VicGFnZSBjb250ZW50XG4gIGZ1bmN0aW9uIHJlbmRlckFwcCgpIHtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXBwJykuaW5uZXJIVE1MID0gXCJcXG4gICAgPGhlYWRlcj5cXG4gICAgICA8aDE+XFxuICAgICAgICA8aW1nIHNyYz1cXFwiXCIuY29uY2F0KHN0YXJXYXJzTG9nbywgXCJcXFwiIGNsYXNzPVxcXCJzdGFyLXdhcnMtbG9nb1xcXCIgYWx0PVxcXCJTdGFyIFdhcnNcXFwiIC8+XFxuICAgICAgPC9oMT5cXG4gICAgICA8aDI+VGljLVRhYy1Ub2U8L2gyPlxcbiAgICA8L2hlYWRlcj5cXG4gICAgPG1haW4+XFxuICAgICAgPGRpdiBjbGFzcz1cXFwiZ2FtZS1jb250YWluZXJcXFwiPjwvZGl2PlxcbiAgICA8L21haW4+XFxuICAgIDxmb290ZXI+Q3JlYXRlZCBieSA8YSBocmVmPVxcXCJodHRwczovL2F1dHVtbmNocmlzLmdpdGh1Yi5pby9wb3J0Zm9saW9cXFwiIHRhcmdldD1cXFwiX2JsYW5rXFxcIj5BdXR1bW4gQnVsbGFyZDwvYT4gJmNvcHk7IFwiKS5jb25jYXQobmV3IERhdGUoKS5nZXRGdWxsWWVhcigpLCBcIjwvZm9vdGVyPlwiKTtcbiAgICBHYW1lU2V0dGluZ3MucmVuZGVyR2FtZVNldHRpbmdzKCk7IC8vIENsaWNrIEV2ZW50IExpc3RlbmVyc1xuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIHZhciBlbGVtZW50ID0gZXZlbnQudGFyZ2V0O1xuICAgICAgZWxlbWVudC5tYXRjaGVzKCcuc3F1YXJlJykgPyBHYW1lLnNlbGVjdFNxdWFyZShldmVudCkgOiBudWxsO1xuICAgICAgZWxlbWVudC5tYXRjaGVzKCcucmVzdGFydC1idXR0b24nKSA/IEdhbWUuc3RhcnROZXdHYW1lKEdhbWVTZXR0aW5ncy5yZXR1cm5HYW1lU2V0dGluZ3NEYXRhKCkpIDogbnVsbDtcbiAgICAgIGVsZW1lbnQubWF0Y2hlcygnLmdhbWUtc2V0dGluZ3MtYnV0dG9uJykgPyBHYW1lU2V0dGluZ3MucmVuZGVyR2FtZVNldHRpbmdzKCkgOiBudWxsO1xuICAgIH0pOyAvLyBDaGFuZ2UgRXZlbnQgTGlzdGVuZXJzXG5cbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIHZhciBlbGVtZW50ID0gZXZlbnQudGFyZ2V0O1xuICAgICAgZWxlbWVudC5tYXRjaGVzKCcuZ2FtZS1zZXR0aW5ncy1mb3JtICNwbGF5ZXJzLWlucHV0JykgPyBHYW1lU2V0dGluZ3MudG9nZ2xlT25lUGxheWVyU2V0dGluZ3MoZWxlbWVudFtlbGVtZW50LnNlbGVjdGVkSW5kZXhdLnZhbHVlKSA6IG51bGw7XG4gICAgfSk7IC8vIFN1Ym1pdCBFdmVudCBMaXN0ZW5lcnNcblxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgdmFyIGVsZW1lbnQgPSBldmVudC50YXJnZXQ7XG5cbiAgICAgIGlmIChlbGVtZW50Lm1hdGNoZXMoJy5nYW1lLXNldHRpbmdzLWZvcm0nKSkge1xuICAgICAgICBlbGVtZW50WzFdLm5hbWUgPT09ICdkaWZmaWN1bHR5JyA/IEdhbWVTZXR0aW5ncy5oYW5kbGVTdWJtaXQoZXZlbnQsIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwbGF5ZXJzLWlucHV0JykudmFsdWUsIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaWZmaWN1bHR5LWlucHV0JykudmFsdWUsIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwbGF5LWFzLWlucHV0JykudmFsdWUpIDogR2FtZVNldHRpbmdzLmhhbmRsZVN1Ym1pdChldmVudCwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BsYXllcnMtaW5wdXQnKS52YWx1ZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHJlbmRlckFwcDogcmVuZGVyQXBwXG4gIH07XG59KCk7XG5cbmV4cG9ydCB7IEFwcCB9OyIsImV4cG9ydCBkZWZhdWx0IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCJpbmRleC5odG1sXCI7IiwiZXhwb3J0IGRlZmF1bHQgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcImZhdmljb24uaWNvXCI7IiwiaW1wb3J0IHsgQXBwIH0gZnJvbSAnLi9tb2R1bGVzL0FwcCc7XG5pbXBvcnQgJ2ZpbGUtbG9hZGVyP25hbWU9W25hbWVdLltleHRdIS4vaW5kZXguaHRtbCc7XG5pbXBvcnQgJ2ZpbGUtbG9hZGVyP25hbWU9W25hbWVdLltleHRdIS4vZmF2aWNvbi5pY28nO1xuaW1wb3J0ICdub3JtYWxpemUuY3NzJztcbmltcG9ydCAnLi9zdHlsZXNoZWV0cy9zdHlsZS5zY3NzJztcbkFwcC5yZW5kZXJBcHAoKTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///378\n')},432:(e,n,l)=>{e.exports=l.p+"assets/008e3ccd596f5948b8b6.png"}},__webpack_module_cache__={};function __webpack_require__(e){var n=__webpack_module_cache__[e];if(void 0!==n)return n.exports;var l=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](l,l.exports,__webpack_require__),l.exports}__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var e;__webpack_require__.g.importScripts&&(e=__webpack_require__.g.location+"");var n=__webpack_require__.g.document;if(!e&&n&&(n.currentScript&&(e=n.currentScript.src),!e)){var l=n.getElementsByTagName("script");l.length&&(e=l[l.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),__webpack_require__.p=e})();var __webpack_exports__=__webpack_require__(378)})();